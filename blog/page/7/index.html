
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Shiny happy people coding</title>
  <meta name="author" content="Cyril Mougel">

  
  <meta name="description" content="Depuis peu, je tente d&#8217;utiliser Merb et DataMapper. Une différence notable entre Merb et Rails est le système de log. Comme Merb est ORM &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.shingara.fr//blog/page/7/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Shiny happy people coding" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-11352302-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Shiny happy people coding</a></h1>
  
    <h2>Codons avec le sourire</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.shingara.fr/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/afficher-les-log-sql-avec-merb-et-datamapper.html">Afficher les Log SQL avec Merb et DataMapper</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-27T00:00:00+02:00" pubdate data-updated="true">Jun 27<span>th</span>, 2008</time>
        
         | <a href="/afficher-les-log-sql-avec-merb-et-datamapper.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Depuis peu, je tente d&#8217;utiliser <a href="http://merbivore.org">Merb et <a href="http://datamapper.org">DataMapper</a>. Une différence notable entre Merb et Rails est le système de log. Comme Merb est ORM Agnostique, il n&#8217;affiche pas de base les logs SQL. J&#8217;ai cherché plusieurs fois comment avoir mes logs SQL de DataMapper directement dans ma console. J&#8217;ai fini par la trouvé sur le wiki de DataMapper. Je vous livre donc l&#8217;astuce :</p>

<typo:code lang="ruby">
Merb::BootLoader.after_app_loads do
  DataObjects::SQlite3.logger = DataObjects::Logger.new(STDOUT, :debug) 
end
</typo:code>

<p>Vous pouvez bien-sûr modifier le SQlite3 par Postgres ou MySQL. Cette comment fait une sortie en mode debug sur STDOUT. On aurait aussi pu mettre un fichier (&#8216;log/dm.log&#8217;).</p>

<p>Pour connaitre la liste des niveaux de logs, la voici :</p>

<ul>
<li>fatal</li>
<li>error</li>
<li>warn</li>
<li>info</li>
<li>debug</li>
</ul>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/le-piege-des-routes-a-eviter.html">Le piege des routes à éviter</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-17T00:00:00+02:00" pubdate data-updated="true">Jun 17<span>th</span>, 2008</time>
        
         | <a href="/le-piege-des-routes-a-eviter.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Alors, que je testais <a href="http://pictrails.rubyforge.org/">Pictrails</a> pour la <a href="http://blog.shingara.fr/articles/2008/06/15/publication-de-pictrails-0-3-0">release en version 0.3</a>, j&#8217;ai par hasard créé une galerie s&#8217;appelant &#8220;new&#8221;. Ayant implémenté un système de PrettyURL pour pictrails, j&#8217;ai changé les routes REST pour non pas afficher l&#8217;id de la galerie dans l&#8217;url mais son nom. Ainsi, comme ma galerie s&#8217;appele &#8220;new&#8221;, je devais allez sur l&#8217;URL : /galleries/new.</p>

<p>Mais voilà comme galerie était une ressource REST, la route /galleries/new est déjà réservé et je me suis donc retrouvé sur l&#8217;url de création d&#8217;une Gallerie et non sur l&#8217;url de visualisation de la galerie new. C&#8217;est ainsi que je suis tombé dans le piège des routes à éviter.</p>

<p>Maintenant, que j&#8217;ai trouvé le bug il a fallu trouvé la solution et plus que de trouver la solution, il fallait trouver une solution propre. En effet, basiquement, on peux créer un validateur qui vérifie que le nom n&#8217;est pas &#8220;new&#8221;, mais cette technique ne me semblait pas idéal surtout pour l&#8217;avenir et le maintient à terme de cette solution. J&#8217;ai donc commencé à en discuter avec les personnes présentent sur le chan #rubyonrails.fr. C&#8217;est ainsi que <a href="http://lifeisdead.net">webs</a> m&#8217;a proposé une solution tout à fait élégante en me donnant un code de <a href="http://sunfox.org/">sunny</a>. La vérification directe de l&#8217;existence ou non de la route. Voici le bout de code qui permet cette vérification :</p>

<typo:code lang="ruby">
permalinks = ActionController::Routing::Routes.routes.collect {|r|
   r.generation_structure.match(/&#8221;\/galleries\/([\w]+)/)[1] rescue nil
}.uniq.compact
</typo:code>

<p>On récupère ainsi tous les mots utilisés dans nos routes et commençant par galleries. Sur Pictrails, nous obtenons ainsi &#8220;pages&#8221; et &#8220;new&#8221;. Il suffit ensuite d&#8217;empêcher la création de galerie avec ces noms.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/publication-de-pictrails-0-3-0.html">Publication de pictrails 0.3.0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-15T00:00:00+02:00" pubdate data-updated="true">Jun 15<span>th</span>, 2008</time>
        
         | <a href="/publication-de-pictrails-0-3-0.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Presque 3 mois jours pour jours après la dernière release de <a href="http://blog.shingara.fr/articles/2008/03/18/pictrails-0-2-2-released">Pictrails 0.2.3</a>, voici la release de la version 0.3.0</p>

<p style="text-align:center;"><img src="http://blog.shingara.fr/files/public_part_pictrails.png" alt="partie public de pictrails" ></p>

<p>Cette nouvelle version apporte son lot de fonctionnalités. La plus importante étant l&#8217;ajout du support des sous-galerie En effet, désormais, on peux créer des galeries photos dépendant d&#8217;une autre galerie. Cette galerie sera donc visible avec la liste des photos de sa galerie parente. Pour que la navigation soit ainsi plus fluide, j&#8217;ai ajouté un fil d&#8217;ariane ou breadcrumb pour les anglophiles. On sait ainsi désormais dans quel galerie nous nous trouvons et si celle-ci a des parents.</p>


<p style="text-align:center;"><img src="http://blog.shingara.fr/files/breadcrumb_pictrails.png" alt="breadcrumb de pictrails" ></p>

<p>La deuxième fonctionnalité est surtout la refonte compléte du mass_upload. En effet, le mass_upload ne fonctionnait pas trop si on avait énormément de photo a ajouter. Les threads mongrel ou FastCGI s&#8217;arrêtait avec un time out et plus aucune solution de continuer la tâche. Pour ce faire, la première requête liste toutes les images à importer et dans quel galerie. Ensuite à chaque nouvelle requête dans la partie d&#8217;administration une  série de 5 photos est ajoutés. Pour rendre le système plus conviviale, une progress bar a été ajoutée. Celle-ci évolue progressivement si le Javascript est activé sur votre navigateur. Ce système de mass_upload a bien évidement suivit l&#8217;évolution de Pictrails en supportant lui aussi les sous-galeries. Ainsi, il liste de façon récursive les répertoires et créé les galeries avec leurs parents associés.</p>

<p style="text-align:center;"><img src="http://blog.shingara.fr/files/mass_upload_pictrails.png" alt="mass_upload de pictrails" ></p>

<p>J&#8217;espère que cette nouvelle version vous satisfera. Bien-sûr la <a href="http://dev.shingara.fr/projects/roadmap/pictrails">liste des fonctionnalités</a> a ajouter n&#8217;est pas fini pour arriver à la version 1.0. Si vous avez envie de contribuer n&#8217;hésitez pas. Pour plus de détails sur cette version, le <a href="http://pictrails.rubyforge.org">site de pictrails</a> a été mis à jour</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/avoir-le-plugin-java-pour-firefox-sur-debian-amd64.html">Avoir le plugin Java pour firefox sur debian AMD64</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-14T00:00:00+02:00" pubdate data-updated="true">Jun 14<span>th</span>, 2008</time>
        
         | <a href="/avoir-le-plugin-java-pour-firefox-sur-debian-amd64.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Depuis quelque temps, j&#8217;utilise en station de travail, une debian SID avec comme architecture AMD64. Mais je n&#8217;arrivais pas à mettre le plugin Java de firefox. En effet, ce plugin existe sous x86, mais pas sous AMD64. C&#8217;est alors qu&#8217;on m&#8217;a indiqué la marche à suivre. Il suffit d&#8217;ajouter un dépôt supplémentaire :</p>

<pre>deb http://www.mirrorservice.org/sites/ftp.blackdown.org/java-linux/debian sid main contrib non-free</pre>

<p>Un fois ce dépôt ajouté, il suffit d&#8217;installer le paquet <code>j2re1.4-mozilla-plugin</code> et redémarrer Firefox. Ça y est le plugin Java pour firefox est utilisable.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/ou-compiler-ses-fichiers-c-issue-de-rubyinline.html">Où compiler ses fichiers C issue de RubyInline</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-06-13T00:00:00+02:00" pubdate data-updated="true">Jun 13<span>th</span>, 2008</time>
        
         | <a href="/ou-compiler-ses-fichiers-c-issue-de-rubyinline.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.zenspider.com/ZSS/Products/RubyInline/">RubyInline</a> est un joli petit gem qui permet de générer du code C a partir de code Ruby. Ce code C est ensuite compilé et réutilisé durant les appels futurs de la méthode.</p>

<p>Par défaut, RubyInline compile tout dans votre dossier <code>$HOME/.inline</code>. Mais comment faire si l&#8217;utilisateur n&#8217;a pas de HOME par exemple, où tout simplement qu&#8217;il souhaite mettre la compilation dans le dossier <code>$RAILS_ROOT/tmp/inline</code> qui pourrait être une place tout à fait raisonnable.</p>

<p>N&#8217;ayant pas trouvé l&#8217;information dans la documentation de ce gem, j&#8217;ai donc chercher un peu dans le code. J&#8217;ai ainsi découvert que le dossier de compilation des fichiers C est géré par la variable d&#8217;environnement INLINEDIR. Il suffit donc de définir cette variable dans votre fichier d&#8217;environnement.rb pour choisir où sera compilé les fichiers générés par RubyInline.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/vivre-avec-rails-edge-22.html">Vivre avec Rails Edge #22</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-05-26T00:00:00+02:00" pubdate data-updated="true">May 26<span>th</span>, 2008</time>
        
         | <a href="/vivre-avec-rails-edge-22.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Traduction de la <a
href="http://blog.codefront.net/2008/05/25/living-on-the-edge-of-rails-22-pre-railsconf-2008-edition/">news #22</a></p>

<p>Aucun changement hallucinant dans Rails cette semaine avant la RailsConf -
Comme Gregg le mentionnait la semaine dernière dans le <a
href="http://railsenvy.com/2008/5/21/rails-envy-podcast-episode-032">Rails
Envy podcast</a>, ce sont les jours pré-2.1 (Rails 2.1 sera
        <em>probablement</em> sorti au RailsConf), ce qui sera une façon
simple de voir pourquoi. Tous les tests de rails passe désormais sur Ruby 1.9
après un long bug sur <code>#module_eval</code> résolu dans le trunk de Ruby
1.9 (voir <a
                href="http://groups.google.com/group/ruby-core-google/browse_thread/thread/6d08e11363bf49b4">ce
                thread</a> pour plus de détails).</p>


<p>Je serais (pour la première fois) au RailsConf 2008 à Portland, Oregon, ce
jeudi prochain - Si quelqu&#8217;un souhaite me voir et me reconnaitre avec ma <a
href="http://www.facebook.com/people/Chu_Yeow/500115784">photo de
Facebook</a>, s&#8217;il vous plait venez me dire salut.</p>

<p>Le rapport de cette semaine couvre les changement du 19 Mai 2008 au 25 Mai
2008 (le jour correspondant à l&#8217;enregistrement du <a
        href="http://railsenvy.com/podcast/">Rails
                Envy podcast</a>).</p>

<h3>Les méthodes first et last fonctionnent désormais avec les associations et
named_scope</h3>

<p>Vous vous souvenez comment le <a
href="http://blog.codefront.net/2008/04/05/living-on-the-edge-of-rails-14-the-extreme-edition-extremely-late/">merge
du gem has_finder à l&#8217;intérieur de rails</a> a
permis de faire des choses comme <code>Post.first</code> et
<code>Post.last</code>?</p>


<p>Maintenant vous pouvez allez dans l&#8217;étape suivant et utiliser les mêmes
méthode dans vos association ActiveRecord. Par exemple:</p>

<typo:code lanf="ruby">post = Post.find(1)
first_comment = post.comments.first</typo:code>

<p>Si vous avez récement utilisé <a
href="http://ryandaigle.com/articles/2008/3/24/what-s-new-in-edge-rails-has-finder-functionality">named_scope</a>,
vous pouvez désormais faire ceci:</p>


<typo:code lang="ruby">post.comments.recent.last</typo:code>

<p>Cette belle petite fonctionnalitée a été gentiement apporté par <a
href="http://railscasts.com/">Ryan Bates</a> (oui, le <em>Ryan Bates</em> du
        fameux
        <a href="http://railscasts.com/">Railscasts</a>).</p>

<p>Révision concernant cette fonctionnalités: <a
href="http://github.com/rails/rails/commit/73c59638549686fccc749ffd3ac53cb533c5fd61">http://github.com/rails/rails/commit/73c59638549686fccc749ffd3ac53cb533c5fd61</a></p>


<h3>Cache stores a désormais une méthode exist? et ajouté dans le controllers un fragment_exist?</h3>

<p>L&#8217;enregistreur de cache dans Rails (Memcache, file stores, etc.) peux désormais avoir une méthode <code>exist?</code> qui vérifie si une valeur de cache existe pour la clé de cache. Cela permet aux controllers Rails de disposer d&#8217;une méthode <code>fragment_exist?</code> qui permet de vérifier l&#8217;existence d&#8217;un fragment de cache:</p>


<typo:code lang="ruby">fragment_exist?(&#8216;example.com/foo/bar&#8217;)</typo:code>

<p>Cette petite amélioration a été gentiement apporté par <a
href="http://josevalim.blogspot.com/">José Valim</a>.</p>

<p>Révision concernant cette fonctionnalités: <a
href="http://github.com/rails/rails/commit/99860b72aebe0348f41e82d4710343498d89a84b#diff-2">http://github.com/rails/rails/commit/99860b72aebe0348f41e82d4710343498d89a84b#diff-2</a></p>

<h3>Créer un enregistrement d&#8217;une association avec un block en argument</h3>

<p>Vous pouvez désormez créer des enregistrement pour les associations comment ceci:</p>

<typo:code lang="ruby">post.coments.create!(:title => &#8216;Techcrunch&#8217;) do |c|
  c.body = &#8220;Rails can&#8217;t scale&#8221;
  end</typo:code>

<p>Ceci est ajouté au changement de <a
  href="http://blog.codefront.net/2008/05/04/living-on-the-edge-of-rails-19-change_table-for-migrations-and-more/">ActiveRecord::Base.create
  indiqué précédement</a>.</p>
  <p>Ce patch a été réalisé par (encore une fois) <a
  href="http://railscasts.com/">Ryan Bates</a>.</p>
  
  <p>Révision concernant cette fonctionnalités: <a
  href="http://github.com/rails/rails/commit/6cba97d2a449faf21aec9fe9d4434067e414226f">http://github.com/rails/rails/commit/6cba97d2a449faf21aec9fe9d4434067e414226f</a></p>
  <p>Comme toujours, vous pouvez laissez toutes suggestions pour améliorer cette série de Vivre avec Rails.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/vivre-avec-rails-edge-21.html">Vivre avec Rails Edge #21</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-05-21T00:00:00+02:00" pubdate data-updated="true">May 21<span>st</span>, 2008</time>
        
         | <a href="/vivre-avec-rails-edge-21.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Traduction de la <a href="http://blog.codefront.net/2008/05/18/living-on-the-edge-of-rails-21/">news #21</a></p>

<p>C&#8217;est une autre semaine au ralenti (seulement 2 changements à noter selon
        moi) après la <a
href="http://www.rubyinside.com/rails-21-released-891.html">sortie de la première Release candidate (RC1) de Rails
2.1</a>.
Suivez ce lien pour les instructions d&#8217;installation - Mais si vous lisez ce
blog n&#8217;ayez pas peur (parce que vous savez « vivre avec edge »). Vous pouvez
ainsi reporter tous les bugs que vous rencontré lors de la migration vers 2.1
et edge sur le  <a
href="http://rails.lighthouseapp.com/projects/8994-ruby-on-rails/overview">bug
tracker de rails</a> - il s&#8217;agit d&#8217;une RC  donc tous les rapports de bugs sont
les bienvenue et seront utiles!</p>

<p>Le rapport de cette semaine couvre les changements du 12 Mai 2008 au 18 Mai 2008 (jour correspondant à l&#8217;enregistrement de <a href="http://railsenvy.com/podcast/">Rails Envy podcast</a>).</p>

<h3>caches_action peux être conditionels</h3>

<p><code>caches_action</code> peux désormais prendre une option <code>:if</code> (exactement comme <a href="http://blog.codefront.net/2008/04/20/living-on-the-edge-of-rails-17/">caches_page le fait</a>). Par exemple:</p>

<typo:code lang="ruby">caches_action :index, :if => Proc.new { |c| !c.request.format.json? }</typo:code>

<p>Cette petite amélioration est gentiement apporté par José Valim.</p>

<p>Révision concernant cette fonctionnalitée: <a href="http://github.com/rails/rails/commit/7708650f73ddb4db300ea2059c60c1d907a4384e">http://github.com/rails/rails/commit/7708650f73ddb4db300ea2059c60c1d907a4384e</a></p>

<h3>Bugfix: :select option est désormais parcouru dans les finders d&#8217;ActiveRecord en s&#8217;assurant que les tables nécessaires sont inclus dans le SQL généré</h3>

<typo:code lang="ruby">Post.find(:all, :include => :author, :select => &#8216;posts.*, authors.id as &#8220;author_id&#8221;&#8217;, :limit => 2)</typo:code>

<p>Cela générerais la requête SQL suivante:</p>

<typo:code lang="sql">SELECT posts.*, authors.id as &#8220;author_id&#8221; FROM &#8220;posts&#8221; LIMIT 2</typo:code>

<p>Constaté que la table <code>authors</code> n&#8217;est pas jointe. Cette erreur est désormais résolu.</p>

<p>Merci à John Devine pour ce bugfix.</p>

<p>Révision concernant cette fonctionnalitée: <a href="http://github.com/rails/rails/commit/b28b54cab090bed8f099ef375b419a8f92390dd4">http://github.com/rails/rails/commit/b28b54cab090bed8f099ef375b419a8f92390dd4</a></p>

<p>Comme toujours, vous pouvez laissez toutes suggestions pour améliorer cette série de Vivre avec Rails.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/vivre-avec-rails-edge-20.html">Vivre avec Rails Edge #20</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-05-13T00:00:00+02:00" pubdate data-updated="true">May 13<span>th</span>, 2008</time>
        
         | <a href="/vivre-avec-rails-edge-20.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Traduction de la <a href="http://blog.codefront.net/2008/05/11/living-on-the-edge-of-rails-20-scriptdbconsole-and-flashnow-now-test-able/">news #20</a></p>

<p>Le rapport de cette semaine couvre les changements du 5 Mai 2008 au 11 Mai 2008 (jour correspondant à l&#8217;enregistrement de <a href="http://railsenvy.com/podcast/">Rails Envy podcast</a>).</p>

<h3>script/dbconsole</h3>

<p>Un script <code>script/dbconsole</code> a été ajouté et permet de se connecter à votre base de donnée en utilisant sa console.</p>

<p>Si vous avez par exemple besoin de vous connecter à votre base de donnée MySQL de production (pour mieux comprendre ce qu&#8217;il s&#8217;y passe!), vous pouvez lancer <code>RAILS_ENV=production script/dbconsole</code> et vous serez loggé à votre base de donnée en utilisant le client en ligne de commande de MySQL. Cela fonctionne aussi avec les bases de donnée PostgreSQL et SQLite.</p>

<p>Pour utiliser ce script dans votre application Rails, n&#8217;oubliez pas de lancer  <code>rake rails:update:scripts</code> après la mise à jour de votre Rails edge.</p>

<p>Cette jolie petite fonctionnalitée est dû à <a href="http://www.sanityinc.com/">Steve Purcell</a>, qui avait à l&#8217;origine un <a href="http://www.sanityinc.com/articles/rails-db-console">plugin de console de base de donnée</a>.</p>

<p>Révision concernant cette fonctionnalitée: <a href="http://github.com/rails/rails/commit/4a07103687084496b773e18a03b1f2f5e686f7ad">http://github.com/rails/rails/commit/4a07103687084496b773e18a03b1f2f5e686f7ad</a></p>

<h3>flash.now est désormais accessible dans les tests</h3>

<p>C&#8217;est quelque chose que <a href="http://www.pluitsolutions.com/2008/01/22/testing-flashnow-in-rails/">beaucoup</a> <a href="http://rhnh.net/2008/04/19/testing-flash-now-with-rspec">de dévelopeurs Rails</a>,<a href="http://blog.codefront.net/2006/09/03/some-functional-testing-gotchas-in-ruby-on-rails/">moi y compris</a> avaient trouvés en écrivant leur test, concernant les messages flash qui n&#8217;étaient pas initialisé avec <code>flash.now</code>. Principalement, vous ne pouviez pas tester le contenu de vos <code>flash.now</code> parce qu&#8217;ils étaient toujours vide avant que vos tests les atteignent.</p>

<typo:code lang="ruby"># Dans votre controller:
flash.now[:notice] = &#8216;You gotta be kidding me!&#8217;

# Dans votre test:
assert_equal &#8216;You gotta be kidding me!&#8217;, flash.now[:notice]
# FAILS parce que flash.now[:notice] est nil</typo:code>


<p><a href="http://zargony.com/">Andreas Neuhaus</a> a cherché comment cela fonctionne et à défini comment faire un test de <code>flash.now</code> qui fonctionne sans utiliser d&#8217;<code>assert_select</code>.</p>

<p>Révision concernant cette fonctionnalitée: <a href="http://github.com/rails/rails/commit/74eed6290e63111d1aad2b181692a84f4f040aea">http://github.com/rails/rails/commit/74eed6290e63111d1aad2b181692a84f4f040aea</a></p>

<p>Il n&#8217;y a pas grand chose à noté pour cette semaine mais si vous souhaitez connaitre tous les détails, vous souhaiterez probablement parcourir le <a href="http://github.com/rails/rails/commits/master">log des commits Rails</a>. Comme toujours, vous pouvez laissez toutes suggestions pour améliorer cette série de Vivre avec Rails.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/vivre-avec-rails-edge-19.html">Vivre avec Rails Edge #19</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-05-05T00:00:00+02:00" pubdate data-updated="true">May 5<span>th</span>, 2008</time>
        
         | <a href="/vivre-avec-rails-edge-19.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Traduction de la <a href="http://blog.codefront.net/2008/05/04/living-on-the-edge-of-rails-19-change_table-for-migrations-and-more/">news #19</a></p>

<p>Le rapport de cette semaine couvre les changements du 29 Avril 2008 au 4 Mai 2008 (jour correspondant à l&#8217;enregistrement de <a href="http://railsenvy.com/podcast/">Rails Envy podcast</a>).</p>

<h3>change_table pour les migrations d&#8217;ActiveRecord</h3>

<p>Merci à <a href="http://zilkey.com/">Jeff Dean</a>, qui a aussi <a href="http://zilkey.com/2008/4/29/new-rails-core-feature-proposal-super-sexy-migrations">blogué au sujet de la nouvelle fonctionnalité change_table des migrations d&#8217;ActiveRecord</a>. Vous pouvez donc maintenant changer une table avec un block comme ceci :</p>

<typo:code lang="ruby">change_table :videos do |t|
  t.add_timestamps
  t.add_belongs_to :goat
  t.add_string :name, :email, :limit =&gt; 20
  t.remove_column :name, :email # prend de multiples arguments
  t.rename :new_name
  t.string :new_string_column # execute avec le changement de nom de la table
end</typo:code>

<p>Parmis les principaux points à noter :</p>

<ul>
<li><code>add_XXX</code> permettant d&#8217;ajouter une nouvelle colonne, exemple : <code>add_string</code> qui ajoutera un nouveau champs string.</li>
<li>Bien-sûr,<code> add_timestamps</code> permet d&#8217;ajouter les champs datetime magics <code>created_at</code> et <code>updated_at</code></li>
<li><code>remove_column</code> peux dorénavant prendre plusieurs arguments.</li>
<li><code>rename</code> qui renommera la table.</li>
</ul>

<p>Très belle amélioration DRY proposée par <a href="http://zilkey.com/">Jeff Dean</a> une fois encore.</p>

<p>Révision concernant cette fonctionnalité : <a href="http://github.com/rails/rails/commit/96980bd561d79824b6cb6efbcbecdcbf8785d452">http://github.com/rails/rails/commit/96980bd561d79824b6cb6efbcbecdcbf8785d452</a></p>

<h3>ActiveRecord::Base.create prend un block comme ActiveRecord::Base.new</h3>

<p>Youpie, maintenant vous pouvez aussi créer (<code>ActiveRecord::Base.create</code>) un objet ActiveRecord avec un block en argument exactement comme vous pouviez le faire avec <code>ActiveRecord::Base.new</code>:</p>

<typo:code lang="ruby">@person = Person.create(params[:person]) do |p|
  p.name = &#8216;Konata Izumi&#8217;
  p.age = 17
end</typo:code>

<p>Merci a <a href="http://www.workingwithrails.com/person/11022-adam-meehan">Adam Meehan</a> pour ce patch.</p>

<p>Révision concernant cette fonctionnalité : <a href="http://github.com/rails/rails/commit/dd120ede53eaf71dee76894998a81626b7a689fc">http://github.com/rails/rails/commit/dd120ede53eaf71dee76894998a81626b7a689fc</a></p>

<h3>Bugfix: change_column doit permettre d&#8217;utiliser :null => true sur les champs qui ne l&#8217;étaient pas précédement.</h3>


<p>Vous pouvez désormais utiliser <code>change_column</code> dans vos migrations pour modifier une colonne en nullable si elle était précédement </code>NOT NULL</code>.</p>

<p>Ce bugfix est gentiment offert par Nate Wiger.</p>

<p>Révision concernant cette fonctionnalité : <a href="http://github.com/rails/rails/commit/10ef65a3b054270ed3d458ec8eb7c2b9a3e638f7">http://github.com/rails/rails/commit/10ef65a3b054270ed3d458ec8eb7c2b9a3e638f7</a></p>

<p>Comme toujours, vous pouvez laissez toutes suggestions pour améliorer cette série de Vive avec Rails.</p>

<p>Enfin merci à <a href="http://blog.codefront.net/">Chu Yeow</a> de <a href="http://blog.codefront.net/2008/05/01/living-on-the-edge-of-rails-in-french/">m&#8217;encourager dans la traduction de ses magnifiques news</a><p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/vivre-avec-rails-edge-18.html">Vivre avec Rails Edge #18</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-29T00:00:00+02:00" pubdate data-updated="true">Apr 29<span>th</span>, 2008</time>
        
         | <a href="/vivre-avec-rails-edge-18.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Traduction de la <a href="http://blog.codefront.net/2008/04/27/living-on-the-edge-of-rails-18/">news #18</a></p>

<p>Le rapport de cette semaine couvre les changement du 21 Avril 2008 au 27 Avril 2008 (Jour correspondant à l&#8217;enregistrement de <a href="http://railsenvy.com/podcast/">Rails Envy podcast</a>).</p>

<p>Très peu de chose interressant dans le rapport de cette semaine. Il y a eu
principalement un paquet de résolutions de bug et des <a href="http://github.com/rails/rails/commits/master">commits</a> pour la compatibilité avec Ruby 1.8.7.</p>

<h3>Introduction d&#8217;ActiveResource::Base.timeout et récupération de
Timeout::Error dans ActionResource::Connection</h3>

<p>I y a <a href="http://github.com/rails/rails/commit/105910429d5873dce677ef32eef5f705e0625d86">2</a>
<a href="http://github.com/rails/rails/commit/cf32baf915442ffe153ec0e4d8148f147776c30a">changements</a>
qui ont <a href="http://blog.codefront.net/2008/04/22/new-in-rails-activeresource-timeouts-and-why-it-matters/">été
expliqué par Chu Yeow</a> la semaine dernière
et ne seront donc pas détaillé. Lisez donc l&#8217;article <a href="http://blog.codefront.net/2008/04/22/new-in-rails-activeresource-timeouts-and-why-it-matters/">ActiveResource
timeouts and why it matters (en)</a></p>

<h3>Le type entier inteligent pour l&#8217;adaptater MySQL dans les migrations</h3>

<p>L&#8217;adaptater MySQL dans Rails fait correspondre la colonne de type
<code>integer</code> dans vos migrations aux type smalling, int ou biging
dépendant de l&#8217;option :limit.</p>

<p>Cela signifie qu&#8217;une migration comme ceci:</p>

<typo:code lang="ruby">
def self.up
  create_table :searches do |t|
    t.integer :foo, :limit => 2
  end
end
</typo:code>
<p>
Créera la colonne <code>foo</code> comme un type <code>smallint(2)</code>
dans votre base de donnée MySQL (au lieu de <code>int(2)</code> précédement). (Plus d&#8217;information sur <a href="http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html">les types numériques MySQL</a>
<p>

<p>Ce path a été réalisé par DHH.</p>

<p>Révision concernant cette fonctionnalité: <a href="http://github.com/rails/rails/commit/a37546517dad9f6d9a7de6e1dba4d960909d71e8">http://github.com/rails/rails/commit/a37546517dad9f6d9a7de6e1dba4d960909d71e8</a></p>
<p>Comme toujours, vous pouvez laissez tout suggestion pour améliorer cette série de Vive avec Rails.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/8/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/6/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/moped-le-nouveau-driver-mongodb-pour-ruby.html">moped le nouveau driver mongodb pour ruby</a>
      </li>
    
      <li class="post">
        <a href="/quiet-assets-le-limiteur-de-log.html">Quiet Assets le gem qui limite les logs</a>
      </li>
    
      <li class="post">
        <a href="/telecharger-fichier-de-basecamp.html">Récupération de ses fichiers sur basecamp</a>
      </li>
    
      <li class="post">
        <a href="/translate-on-mongoid.html">Localize avec mongoid</a>
      </li>
    
      <li class="post">
        <a href="/mailtrap-l-aide-au-staging.html">Mailtrap l&#8217;aide au staging</a>
      </li>
    
      <li class="post">
        <a href="/une-journee-dediee-i-mongodb.html">Une journée dédiée à MongoDB</a>
      </li>
    
      <li class="post">
        <a href="/periodictimer-de-eventmachine-le-cron-simplifie.html">PeriodicTimer de EventMachine, le cron simplifié</a>
      </li>
    
      <li class="post">
        <a href="/oupsnow-0-5-0-est-sortie.html">Oupsnow 0.5.0 est sortie</a>
      </li>
    
      <li class="post">
        <a href="/pourquoi-ruby-et-ruby-on-rails-dans-le-developpement-dapplication-web.html">Pourquoi Ruby et Ruby On Rails dans le développement d&#8217;application web ?</a>
      </li>
    
      <li class="post">
        <a href="/que-cherche-un-developpeur-dans-une-offre-demploi.html">Que cherche un développeur dans une offre d&#8217;emploi ?</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/shingara">@shingara</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'shingara',
            count: 10,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("shingara", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/shingara" class="twitter-follow-button" data-show-count="true">Follow @shingara</a>
  
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Cyril Mougel -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'shinydevblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
