
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Shiny happy people coding</title>
  <meta name="author" content="Cyril Mougel">

  
  <meta name="description" content="Depuis le 27 février 2008, j&#8217;ai finalement décidé d&#8217;abandonner l&#8217;utilisation de mercurial dans mon projet Pictrails. J&#8217;ai &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.shingara.fr//blog/page/9/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Shiny happy people coding" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-11352302-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Shiny happy people coding</a></h1>
  
    <h2>Codons avec le sourire</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.shingara.fr/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/git-submodule-presque-le-svn-externals-de-git.html">Git-submodule, presque le svn:externals de GIT</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-08T00:00:00+01:00" pubdate data-updated="true">Mar 8<span>th</span>, 2008</time>
        
         | <a href="/git-submodule-presque-le-svn-externals-de-git.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Depuis le 27 février 2008, j&#8217;ai finalement décidé d&#8217;abandonner l&#8217;utilisation de mercurial dans mon projet Pictrails. J&#8217;ai fini par migré vers GIT. En effet, GIT est énormément utilisé par la communauté Ruby et c&#8217;est un très bon SCM. Un peu plus rapide que Mercurial et avec de meilleurs outils annexe comme par exemple git-svn. Voici par exemple un autre point qui me fait pencher un peu pour GIT. Il s&#8217;agit de git-submodule.
</p>

<p>
Un des gros points fort de SVN est la propriété svn:externals, qui permet de faire pointé un répertoire vers un autre repository SVN. Cette fonctionnalité n&#8217;existe pas à ma connaissance sous mercurial. Mais sous GIT, il y a git-submodule. C&#8217;est pas aussi bien que svn:externals, mais c&#8217;est déjà pas mal. En effet, le seul défaut de git-submodule est de ne pas pouvoir récupérer qu&#8217;une partie du dépôt GIT, comme un dossier en particulier. On est obligé de tout récupéré. svn:externals pouvait limiter la dépendance par contre. Je trouverais peut-être un palliatif.
</p>

<p>
Comment utiliser git-submodule ? Il faut d&#8217;abord trouver le repository GIT que l&#8217;on veux dupliquer dans son projet GIT. Un fois celui-ci trouvé, il faut l&#8217;ajouter comme submodule :
</p>

<pre>
$ git submodule add &lt;&lt;repo&gt;&gt; /directory/
</pre>

<p>Une fois que c&#8217;est fait, un dossier .gitsubmodule est créé et il faut donc l&#8217;ajouter au versionning, le commiter et le push.</p>

<p>Par contre, si vous faite un pull du repository GIT qui contient ce submodule, le téléchargement des sous-modules ne se fait pas automatiquement. En conséquence, il faut penser a réaliser un init et un  update des submodules.</p>

<pre>
$ git submodule init
$ git submodule update
</pre>

<p>Pareil, la mise à jour des submodules ne se fait pas automatiquement. Il faut faire un petit update de temps en temps.</p>

<pre>$ git submodule update</pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/thin-le-buzz-qui-se-justifie.html">Thin, le buzz qui se justifie</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-27T00:00:00+01:00" pubdate data-updated="true">Feb 27<span>th</span>, 2008</time>
        
         | <a href="/thin-le-buzz-qui-se-justifie.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>C&#8217;est quoi Thin ?</h3>

<p>Depuis maintenant 3 mois seulement un nouveau gem est apparu comme webserver. Sa logique est simple. Prendre tout ce qu&#8217;il y a de meilleur partout, de compiler tout çà et d&#8217;en faire un meilleur produit. Ce gem, c&#8217;est <a href="http://code.macournoyer.com/thin/">Thin</a>. Il se dit &#8220;Yet Another WebServer&#8221;. Je pense que le titre est en référence à YARV. Mais je n&#8217;en ai aucune preuve.</p>

<p>Depuis la version 0.7.0 de thin, le buzz a pris de l&#8217;ampleur sur les bienfaits de ce WebServer. Étant un peu aventurier, j&#8217;ai décidé de tenter l&#8217;aventure. J&#8217;ai migré mes 3 applications de mongrel_cluster vers Thin. Voici donc comment faire cette migration car il n&#8217;y a rien de plus simple.</p>

<h3>Installer Thin</h3>

<p>Il faut déjà installer le gem thin</p>

<pre>
#gem install thin
</pre>

<p>Le meilleur moyen pour lancer les commandes de lancement de Thin, il faut allez dans le répertoire de son application Rails. Dans ce répertoire, faire :</p>

<pre>
$thin config -C config/thin.yml
</pre>

<p>Avec cette commande thin va préparer un fichier de configuration complet il ne vous restera plus qu&#8217;à le modifier. J&#8217;ai mis ce fichier dans config/thin.yml pour être homogène avec mongrel_cluster. Il n&#8217;y a aucune obligation de nomage ou d&#8217;emplacement. Le fichier de base est du type suivant :</p>

<pre>
---
pid: tmp/pids/thin.pid
log: log/thin.log
port: 3000
max_conns: 1024
timeout: 30
environment: development
max_persistent_conns: 512
chdir: /var/rails/typo-5-0-stable
address: 0.0.0.0
</pre>

<p>Il ressemble ainsi très fortement au fichier de mongrel_cluster.yml. Il ne reste plus qu&#8217;a le modifier pour qu&#8217;il fasse ce que l&#8217;on souhaite. En général, on modifie le port et l&#8217;environnement. Ensuite, on peux définir le nombre d&#8217;instance de thin dédiés à cette application. Pour cela on a juste à rajouter la clé <code>servers:</code> et donner le nombre d&#8217;instance. Mon fichier est ainsi devenu :</p>

<pre>
---
pid: tmp/pids/thin.pid
log: log/thin.log
port: 44000
max_conns: 1024
timeout: 30
environment: production
max_persistent_conns: 512
chdir: /var/rails/typo-5-0-stable
address: 0.0.0.0
servers: 2
</pre>

<p>Enfin pour démarrer ou arreter ces instances, rien de plus simple.</p>

<p>démarrage :</p>
<pre>
$ thin start -C config/thin.yml
</pre>

<p>arrêt :</p>
<pre>
$ thin stop -C config/thin.yml
</pre>

<p>Et maintenant l&#8217;intérêt ?</p>

<h3>Intérêt de thin</h3>

<p>Au niveau de la mémoire, il n&#8217;y a pas vraiment de différence entre mongrel et thin. Ils utilisent a peu près la même mémoire d&#8217;après ce que j&#8217;ai pu constater. Par contre, au niveau de la vitesse de réponse, thin est un peu plus rapide. Ainsi voici les résultats d&#8217;un benchmark rapide que j&#8217;ai réalisé sur ma dédibox.</p>


<h4>Pour mongrel</h4>

<pre>
hello:~/$ ab -n 1000 -c 10 http://dev.shingara.fr/
This is ApacheBench, Version 2.0.40-dev <$Revision: 1.146 $> apache-2.0
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Copyright 2006 The Apache Software Foundation, http://www.apache.org/

Benchmarking dev.shingara.fr (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Completed 600 requests
Completed 700 requests
Completed 800 requests
Completed 900 requests
Finished 1000 requests


Server Software:        nginx/0.6.26
Server Hostname:        dev.shingara.fr
Server Port:            80

Document Path:          /
Document Length:        4640 bytes

Concurrency Level:      10
Time taken for tests:   81.920747 seconds
Complete requests:      1000
Failed requests:        0
Write errors:           0
Total transferred:      4995000 bytes
HTML transferred:       4640000 bytes
Requests per second:    12.21 [#/sec] (mean)
Time per request:       819.207 [ms] (mean)
Time per request:       81.921 [ms] (mean, across all concurrent requests)
Transfer rate:          59.53 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       36   38   1.5     38      76
Processing:    94  778 726.4    644    4108
Waiting:       92  774 723.3    641    4106
Total:        131  816 726.4    681    4146

Percentage of the requests served within a certain time (ms)
  50%    681
  66%   1273
  75%   1344
  80%   1382
  90%   1669
  95%   1924
  98%   2634
  99%   3011  
 100%   4146 (longest request)
</pre>

<h4>Pour thin</h4>

<pre>
hello:~/$ ab -n 1000 -c 10 http://dev.shingara.fr/
This is ApacheBench, Version 2.0.40-dev <$Revision: 1.146 $> apache-2.0
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Copyright 2006 The Apache Software Foundation, http://www.apache.org/

Benchmarking dev.shingara.fr (be patient)
Completed 100 requests                                                                                                                                 
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Completed 600 requests
Completed 700 requests
Completed 800 requests
Completed 900 requests
Finished 1000 requests


Server Software:        nginx/0.6.26
Server Hostname:        dev.shingara.fr
Server Port:            80

Document Path:          /
Document Length:        4640 bytes

Concurrency Level:      10
Time taken for tests:   67.245564 seconds
Complete requests:      1000
Failed requests:        0
Write errors:           0
Total transferred:      4986008 bytes
HTML transferred:       4646330 bytes
Requests per second:    14.87 [#/sec] (mean)
Time per request:       672.456 [ms] (mean)
Time per request:       67.246 [ms] (mean, across all concurrent requests)
Transfer rate:          72.41 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       36   44 133.9     38    3035
Processing:    93  621 462.3    518    1946
Waiting:       91  548 389.6    473    1665
Total:        132  666 483.9    561    4278

Percentage of the requests served within a certain time (ms)
  50%    561
  66%    878
  75%   1017
  80%   1098
  90%   1309
  95%   1580
  98%   1703
  99%   1795
 100%   4278 (longest request)
</pre>

<h4>Ca veux dire quoi ?</h4>

<p>Il y a une petite avance pour thin qui permet de faire 14,87 requêtes par seconde contre 12,21 requêtes pour mongrel. Tout cela avec 10 instances simultanés et un total de 1000 requêtes. Mais après tout thin n&#8217;a que 3 mois. Il est encore jeune et n&#8217;a pas de version 1.0. Ça devrait pouvoir encore s&#8217;améliorer.</p>

<h3>Coté parano ?</h3>

<p>Je n&#8217;ai pas encore pu tester la stabilité de thin. En effet, on peux se demander à juste titre si il est vraiment stable. Pour cela il faudra attendre.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/quand-la-vue-modifie-son-layout.html">quand la vue modifie son layout</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-26T00:00:00+01:00" pubdate data-updated="true">Feb 26<span>th</span>, 2008</time>
        
         | <a href="/quand-la-vue-modifie-son-layout.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Cas d&#8217;utilisation</h3>

<p>Dans l&#8217;administration de Typo, en fonction du controller appelé, voir de l&#8217;action, il faut modifier la partie indiquant le sous-menu. On a donc 3 possibilités pour réaliser cette partie dynamique.</p>

<ol>
  <li>Mettre la partie variable directement dans la vue et l&#8217;enlever du template.</li>
  <li>Mettre les informations directement dans le controller ou l&#8217;action et c&#8217;est cette information qui sera lu par le template</li>
  <li>Utiliser content_for directement dans la vue en utilisant le yield dans le template</li>
</ol>

<p>Bien sûr la meilleur méthode est la troisième. Mais je vais expliquer pourquoi et comment on peux mettre en oeuvre.</p>

<h3>Mettre la partie variable directement dans la vue et l&#8217;enlever du template</h3>

<p>
Cette méthode est de loin la plus simple qui soit. On sait que notre partie n&#8217;est pas toujours affiché pour le layout indiqué, donc on la met pas dans le template. Mais voilà, si on a du code entre notre partie dynamique et le vrai contenu de notre vue, on a pas le choix il faut dupliquer cette partie et ainsi on se retrouve à faire plein de copier coller et comme on sait le copier coller c&#8217;est pas DRY. Il faut donc essayer de proscrire cette méthode. Le cas le plus horrible est bien sur la modification de la partie que vous avez mis dans chaque vue et ceux sur vos 100 vues. Bonne chance.
</p>

<h3>Mettre les informations directement dans le controller</h3>

<p>Cette technique est un peu plus évolué que la précédente car elle permet d&#8217;être plus DRY. En effet, si on a du code entre sa partie &#8220;dynamique&#8221; et sa vue, on est pas obligé de l&#8217;intégrer dans chaque vue. Ce qui permet d&#8217;avoir un template plus important et des vues plus légères. Mais l&#8217;inconvénient de cette technique et qu&#8217;il faut gérer l&#8217;affichage et des techniques visuel directement dans le controller. Par exemple le nom des liens, etc.. Ce n&#8217;est pas du tout dans la logique MVC, car une partie de la vue est généré et controllé par le controlleur. Le controlleur ne doit que définir quel vue utiliser et donner les variables issues d&#8217;une ressources externes.</p>

<h3>Utiliser content_for directement dans la vue en utilisant le yield dans le template</h3>

<p>Pour que ça soit la vue qui gère le contenu dans le template sans que le controller s&#8217;en mêle, la meilleur technique est d&#8217;utiliser content_for. Cette méthode permet de mettre en interne un bloc de code HTML. Ce bloc de code HTML n&#8217;est lu que par l&#8217;utilisation d&#8217;un yield :le_nom_du_bloc. On peux ainsi définir le bloc dans la vue et donner sa position directement dans le layout. Si ensuite vous voulez réutiliser le même bloc de code, un render :partial permettra de factoriser encore le code. Voici un exemple d&#8217;utilisation de cette méthode avec un template et une vue.</p>

<p>Template :</p>

<typo:code lang="html">
<html>
  <head>
    <title>;Ma page</title>
  </head>
  <div id="menu">
   <ul>
    <%= yield :menu %>
  </ul>
  </div>
  <p>un peu de texte au milieu</p>
  <div id="content">
    <%= yield %>
  </div>
</html>
</typo:code>

<p>Vue :</p>

<typo:code lang="html">
<% content_for :menu do %>
  <li><% link_to 'Voir', page_url %></li>
<% end %>

<p>Ma vue compléte</p>

</typo:code>


<p>Vous trouvez pas ça génial ?</p>

<p>Sinon pour les anciens qui connaissaient la technique avant Rails 2.0 et qui utilisait @content_for_mon_block cette technique est déprécié. Il faut utiliser plutôt le yield depuis la version 2.0.x</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/pictrails-0-1-0-sortie-pour-une-premiere-alpha.html">Pictrails 0.1.0 sortie pour une première alpha</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-27T00:00:00+01:00" pubdate data-updated="true">Jan 27<span>th</span>, 2008</time>
        
         | <a href="/pictrails-0-1-0-sortie-pour-une-premiere-alpha.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Ca y est, j&#8217;ai enfin sortie une première version de <a href="http://pictrails.rubyforge.org/">Pictrails</a>.</p>

<p>Pictrails est une application réalisé avec Rails 2.0. Elle permet de gérer des albums photos.</p>

<p>Pictrails est venue du constat qu&#8217;aucune application libre réalisé avec RubyOnRails n&#8217;était plus à jour sur la création d&#8217;une galerie personnel de photo. Il existe bien des sites internet qui fournissent ce service comme Flikr, mais cela pose la question de la diffusion de ses données. Grâce à des applications libre comme Pictrails, vous êtes le seuls maitre de vos données.</p>

<p>Actuellement Pictrails est encore en alpha. Il n&#8217;y a aucun test unitaire de réalisé dessus ce qui peux entrainer de grosses erreurs. Je vais immédiatement réaliser tous ces tests pour que la prochaine version ait une couverture de code de 100%</p>

<p>Toutes personnes souhaitant contribuer à ce projet est la bienvenue. J&#8217;ai mis en place un projet sur <a href="http://dev.shingara.fr/">mon redmine personnel</a> pour gérer <a href="http://dev.shingara.fr/projects/show/3">pictrails</a>. Vous pouvez y poster des bugs ou améliorations que vous souhaitez. Un <a href="http://hg.shingara.fr/">repository mercurial</a> est lui aussi en place pour le contrôle de source. Ma plus grosse difficultés étant le graphisme, toutes propositions est la bienvenue.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/rubinius-a-fond-sur-la-communaute-et-les-commiters.html">Rubinius à fond sur la communauté et les commiters</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-21T00:00:00+01:00" pubdate data-updated="true">Jan 21<span>st</span>, 2008</time>
        
         | <a href="/rubinius-a-fond-sur-la-communaute-et-les-commiters.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Alors que je regardais une <a href="http://rubyconf2007.confreaks.com/d2t1p3_rubinius.html">video sur Rubinius</a>, car je voulais essayer de comprendre un peu ce projet suite au commentaire de Zed Shaw qui indiquait qu&#8217;il trouvait l&#8217;équipe de <a href="http://rubini.us/">Rubinius</a> vraiment impressionnante. J&#8217;ai appris que la communauté Rubinius comprenait 57 commiters. En effet, dans leur philosophie, la moindre personne qui a réalisé 1 seul et unique patch a un droit en commit. Ils pensent que du moment que tu as fait un patch qui tient la route alors tu ne pourras que faire progresser la communauté. Au pire un revert sera effectué. Mais après tout le revert est tout à fait logique. Par contre, les tests doivent être complètement béton.</p>

<p>Cette idée est exactement ce que je pense à propos du libre. En effet, je trouve que beaucoup de projets font trop de difficultés pour ajouter des commiters. Effectivement, la philosophie de Rubinius est totalement extrême. Mais je pense que beaucoup de projets auraient à suivre cette exemple. Que ce soit Rails qui n&#8217;a que seulement 5 commiters à l&#8217;heure actuelle. Alors que des patchs sont ajoutés tous les jours sur le Trac de Rails ou alors Redmine où Jean-Philippe Lang est toujours seul à développer cette application, malgrès les multiples patchs qui lui sont soumis régulièrement.</p>

<p>Je pense qu&#8217;une procédure clair et net d&#8217;acquisition de droit en commit serait une très bonne chose. Une philosophie un peu comme le fait Debian. Sur mes projets, j&#8217;essayerais de faire ceci.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/migration-vers-typo-5-0.html">Migration vers Typo 5.0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-11T00:00:00+01:00" pubdate data-updated="true">Jan 11<span>th</span>, 2008</time>
        
         | <a href="/migration-vers-typo-5-0.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Ca y est ce blog a été migré vers la branche 5.0 Stable de <a href="http://www.typosphere.org/">Typo</a>. Cette nouvelle version apporte <a href="http://fredericdevillamil.com/sortie-de-typo-5-0-eugene-atget-pour-rails-2-0">énormément de changement</a> que je ne détaillerais pas ici, car elles ont tout à fait bien été décrite.</p>

<p>J&#8217;ai même eu la chance d&#8217;avoir vu <a href="http://trac.typosphere.org/search?q=shingara&ticket=on">plusieurs de mes patchs</a> <a href="http://trac.typosphere.org/changeset/1587">intégrés</a> à cette version.</p>

<p>Pour effectuer la migration vers cette nouvelle version de Typo, j&#8217;ai dû hélas faire quelques petites modifications. En effet, j&#8217;ai appris par <a href="http://fredericdevillamil.com/">Frédéric</a>, qu&#8217;il y avait un petit bug à l&#8217;heure actuel. <a href="http://trac.typosphere.org/ticket/1110">Les tags ne peuvent pas avoir de point dans leur nom</a>. J&#8217;ai ainsi indiqué sur ce ticket la modification ci-jointe que j&#8217;ai réalisé pour faire passer la pillule à Typo. Hélas cela n&#8217;est qu&#8217;un contournement. Il suffit donc d&#8217;utiliser la magie de la console Rails pour éviter le problème en supprimant le point dans son tag.</p>

<pre>
rails@shinydedi /var/rails/typoblog-dev/current $ ./script/console production
Loading production environment.
>> t = Tag.find_by_name "rubyonrails2.0"
=> #<Tag:0xb70bb848 @attributes={"name"=>"rubyonrails2.0", "updated_at"=>"2007-09-29 23:48:11.980446", "id"=>"18", "display_name"=>"rubyonrails2.0", "created_at"=>"2007-09-29 23:48:11.980446"}>
>> t.name "rubyonrails-2-0"
=> "rubyonrails2.0"
>> t.display_name = "rubyonrails-2-0"
=> "rubyonrails-2-0"
>> t.name = "rubyonrails-2-0"
=> "rubyonrails-2-0"
>> t
=> #<Tag:0xb70bb848 @attributes={"name"=>"rubyonrails-2-0", "updated_at"=>"2007-09-29 23:48:11.980446", "id"=>"18", "display_name"=>"rubyonrails-2-0", "created_at"=>"2007-09-29 23:48:11.980446"}>
>> t.save
=> true
</pre>

<p>J&#8217;ai ensuite eu un nouveau petit problème lors du lancement de la tâche de migration de la base de donnée. Il me manquait le gem Rcov. Comme le serveur est mon serveur de production, j&#8217;ai préféré enlevé le fichier qui me demandait cette dépendance que d&#8217;installer ce gem. Par contre j&#8217;ai récupéré les sources du SVN de Typo. Donc peut-être que sur les versions releasés, ce fichier a été enlevé.</p>

<pre>
rails@shinydedi /var/rails/typo-5-0-stable $ rm lib/tasks/rcov.rake
</pre>

<p>Et après tout est passé. A part ma petite erreur d&#8217;oubli de changement de localisation du dossier static pour mon serveur. Mais là c&#8217;est que de l&#8217;administration pur et dur.</p>

<p>Enfin au niveau des modifications, j&#8217;ai aussi changé de thème pour conserver le nouveau thème par défaut de Typo. J&#8217;ai juste réalisé quelques modifications au niveau du fichier CSS pour que ça corresponde plus à mes envies. Je vous fournis les modifications pour les curieux.</p>

<pre>
Index: themes/dirtylicious/stylesheets/application.css
===================================================================
--- themes/dirtylicious/stylesheets/application.css     (révision 1624)
+++ themes/dirtylicious/stylesheets/application.css     (copie de travail)
@@ -21,8 +21,8 @@

 li {list-style: none;}

-h1 {font: normal 1.8em Tahoma,sans-serif;}
-h2 {font: normal 1.6em sans-serif;}
+h1 {font: normal 2.3em Tahoma,sans-serif;}
+h2 {font: normal 2em sans-serif;}
 h3 {font: bold 1em Tahoma,sans-serif;}

 h1,h2,h3 {padding-top: 6px; color: #553; margin-bottom: 4px;}
@@ -167,6 +167,16 @@
     color: #654;
 }

+#sidebar #categories li a {
+    display: inline;
+    padding: 0 0 0 5%;
+}
+
+#sidebar #archives li a {
+    display: inline;
+    padding: 0 0 0 5%;
+}
+
 /* footer */
 #footer {
     background: #949490;
@@ -325,3 +335,26 @@
 #sidebar table tfoot #next a {text-align:center;}

 #searchform {padding: 10px;}
+
+#delicious {
+    border: 4px solid rgb(188, 204, 235);
+    padding-left: 5%;
+    padding-right: 2%;
+    padding-bottom: 10px;
+}                                                   
+
+pre {
+    background-color: black;
+    color: white;
+    font-size: 1.3em;
+    padding: 2%;
+}
+
+.content h1 {
+    font-size:1.6em;
+}
+
+.content h2 {
+    font-size: 1.4em;
+    padding-left: 5%;
+}

</pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/desactiver-les-contraintes-d-integrites-sous-rails-2-0.html">Désactiver les contraintes d&#8217;intégrités sous Rails 2.0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-08T00:00:00+01:00" pubdate data-updated="true">Jan 8<span>th</span>, 2008</time>
        
         | <a href="/desactiver-les-contraintes-d-integrites-sous-rails-2-0.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Suite à une petite discussion sur IRC sur le chan #rubyonrails.fr, j&#8217;ai constaté qu&#8217;une nouvelle méthode avait été ajouté dans Rails 2.0 et que je l&#8217;avais utilisé.</p>

<p>Cette nouvelle méthode est <a href="http://api.rubyonrails.com/classes/ActiveRecord/ConnectionAdapters/AbstractAdapter.html#M001287">AbastractAdapter#disable_referential_integrity</a>. Elle permet tout simplement désactiver les contraintes d&#8217;intégrités dans le bloc de code donné en paramètre de cette méthode. C&#8217;est vraiment une méthode très pratique dans le cas où on veux réaliser un gros INSERT dans la base de donnée. Ainsi elle est utilisée dans la classe Fixture pour insérer les données.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/whotowho-0-2-0-est-sortie.html">WhoToWho 0.2.0 est sortie</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-06T00:00:00+01:00" pubdate data-updated="true">Jan 6<span>th</span>, 2008</time>
        
         | <a href="/whotowho-0-2-0-est-sortie.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Après un peu moins de 3 mois depuis la version 0.1.0, voici la version 0.2.0 de <a href="http://whotowho.rubyforge.org/">WhoToWho</a> que je viens de finir. Cette nouvelle version était quasiment fini depuis un bout de temps, mais il manquait surtout les finissions et j&#8217;ai enfin pris le temps de le faire. Voici les évolutions sur cette version : </p>

<ul>
<li>Changement de Licence, car j&#8217;ai décidé de mettre WhoToWho sous licence MIT et plus GPLv3</li>
<li>Création d&#8217;un nouveau site pour WhoToWho grâce à l&#8217;utilisation de <a href="http://newgem.rubyforge.org/">newgem</a> qui est bien pratique.</li>
<li>Ajout de la possibilité de gérer un système d&#8217;exclusion dans la liste. Ainsi on peux dire que tel personne ne pourra pas être choisi par tel autre personne. Très pratique pour faire des exclusions au niveau des couples (ce que j&#8217;ai fait et où a été mon Use Case).</li>
<li>Utilisation d&#8217;un vrai mode verbeux avec suppression des logs inutile si l&#8217;option -v n&#8217;est pas activé et l&#8217;ajout de plusieurs logs si l&#8217;option est activé</li>
<li>Passage des Log avec le Logger de Ruby et non plus simplement des puts tout bête.</li>
</ul>

<p>Mes prochaines évolutions seront au niveau de l&#8217;interface pour la rendre plus utilisable par un non informaticien qui ne connait pas Ruby. J&#8217;ai donc l&#8217;intention de mettre une interface en QT4 pour WhoToWho.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/moins-de-log-pour-actionmailer-et-un-compte-gmail.html">Moins de log pour ActionMailer et un compte Gmail</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-06T00:00:00+01:00" pubdate data-updated="true">Jan 6<span>th</span>, 2008</time>
        
         | <a href="/moins-de-log-pour-actionmailer-et-un-compte-gmail.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Si comme moi vous avez cherché un système pour envoyer un email par ActionMailer avec votre compte Gmail, vous êtes forcément tombé sur le <a href="http://comscreens.free.fr/screens.php?act=see&scr=1609090355">post de Stephen Chu sur l&#8217;utilisation de votre compte Gmail avec ActionMailer.</a>. J&#8217;ai ainsi mis sa classe dans mon <a href="http://whotowho.rubyforge.org">WhoToWho</a> avec une option qui permet de l&#8217;utiliser le cas échéant.</p>

<p>Mais voilà, par défaut il y a pas mal de logs qui sorte sur la sortie d&#8217;erreur STDERR. J&#8217;ai donc cherché comment la limiter voir la supprimer. J&#8217;ai ainsi trouvé les 2 lignes qui affichent ces logs. Il s&#8217;agit de la ligne suivante qui est répété deux fois. :</p>

<pre>
@socket.debug_output = STDERR #@debug_output
</pre>

</p>Après avoir commenté ces lignes, je n&#8217;ai plus eu de logs. J&#8217;ai bien sûr pour WhoToWho permis de les afficher avec l&#8217;option -v.</p>

<p>Avec un peu de chance je devrais sortir une nouvelle version de WhoToWho très bientôt.</p>

<p>En lisant dans les commentaires du post de Stephen, j&#8217;ai ainsi lu que quelqu&#8217;un avait tout simplement utilisé le gem tlsmail et avait simplement ajouté la ligne suivante :</p>

<pre>
require 'tlsmail'
Net::SMTP.enable_tls(OpenSSL::SSL::VERIFY_NONE)

ActionMailer::Base.server_settings = {
:address => 'smtp.gmail.com',
:port => 587,
:domain => 'yourdomain.com',
:authentication => :plain,
:user_name => 'username',
:password => 'password'
}
</pre>

<p>C&#8217;est à tester :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/hoe-laide-de-diffusion-de-gem-sur-rubyforge.html">Hoe, l&#8217;aide de diffusion de gem sur rubyforge</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-12-18T00:00:00+01:00" pubdate data-updated="true">Dec 18<span>th</span>, 2007</time>
        
         | <a href="/hoe-laide-de-diffusion-de-gem-sur-rubyforge.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Qu&#8217;est ce qu&#8217;Hoe</h1>

<p>
<a href="http://seattlerb.rubyforge.org/hoe/">Hoe</a> est un tout petit gem géré par la <a href="http://seattlerb.rubyforge.org/">Seattle Ruby Brigade!</a>. Ce gem n&#8217;a qu&#8217;une utilité, aider au développement d&#8217;un gem sur rubyforge. Mais comme tout petite librairie importante, ce qu&#8217;il fait, il le fait bien.
</p>

<h1>Installation de Hoe</h1>

<h2>Dépendance</h2>

<p>
Hoe permet de générer des gems et il nécessite donc <a href="http://rubygems.org/">rubygems</a>. Il déploie votre gems sur RubyForge et nécessite donc aussi le gem rubyforge. Il ajoute plein de tâche rake pour vous. il a donc besoin de <a href="http://rake.rubyforge.org/">rake</a>.
</p>

<h2>Installation</h2>

<p>Pour l&#8217;installer il suffit de faire un <code>gem install hoe</code>.

<h1>Créer un projet Hoe</h1>

<p>Pour plus de simplicité pour la suite, il suffit de créer un projet hoe. C&#8217;est un peu comme réaliser un projet avec Rails. Hoe crée une série de répertoires et fichiers qui ont tous leurs utilités et permettront de réaliser facilement votre gem avec le déploiement sur RubyForge.</p>

<p>Pour créer votre projet, vous avez ainsi la commande sow. Il suffit de réaliser <code>sow projet</code>. Voici un exemple de sortie généré par cette commande.</p>

<pre>
hello-23:46:11:~/programmation/ruby/test$ sow testhoe
creating project testhoe
... done, now go fix all occurrences of 'FIX'

  testhoe/Rakefile:9:  # p.author = 'FIX'
  testhoe/Rakefile:10:  # p.email = 'FIX'
  testhoe/Rakefile:11:  # p.summary = 'FIX'
  testhoe/README.txt:2:    by FIX (your name)
  testhoe/README.txt:3:    FIX (url)
  testhoe/README.txt:7:FIX (describe your package)
  testhoe/README.txt:11:* FIX (list of features or problems)
  testhoe/README.txt:15:  FIX (code sample of usage)
  testhoe/README.txt:19:* FIX (list of requirements)
  testhoe/README.txt:23:* FIX (sudo gem install, anything else)
  testhoe/README.txt:29:Copyright (c) 2007 FIX

</pre>

<p>Vous obtenez ainsi l&#8217;arborescence suivante dans le répertoire &#8220;testhoe&#8221;</p>


<pre>hello-23:46:19:~/programmation/ruby/test$ tree testhoe/
testhoe/
|-- History.txt
|-- Manifest.txt
|-- README.txt
|-- Rakefile
|-- bin
|   `-- testhoe
|-- lib
|   `-- testhoe.rb
`-- test
    `-- test_testhoe.rb

3 directories, 7 files
</pre>

<p>Voici à quoi sert chaques fichiers :</p>

<ul>
<li>History.txt permet de définir le changelog de votre projet version par version. il est déjà pré-rempli</li>

<li>Manifest.txt est un fichier listant tous les fichiers qui sont présent dans votre futur gem. Vous pouvez vérifier si il est exacte grâce à une tâche rake : rake check_manifest. Ca générera un diff entre le fichier Manifest.txt et votre arborescence.</li>

<li>README.txt est tout simplement le fichier qui définis tout votre projet. C&#8217;est en grande partie à partir de lui que vous seront tiré les information pour publier votre gem.</li>

<li>RakeFile qui est le fichier de configuration des tâche rake généré par HOE.</li>

<li>le dossier bin est le dossier ou vous insérez l&#8217;executable</li>

<li>le dossier lib est le dossier où vous intégrez les librairies développé pour votre gem</li>
</ul>

<p>Chaque partie du fichier README.txt est commenté et sera utilisé directement par des tâches rake pour la publication de votre gem sur rubyforge.</p>

<h1>Configurer un projet Hoe</h1>

<p>Pour configurer un projet Hoe, il faut éditer le fichier Rakefile. En effet, les informations importantes ce trouve dedans :</p>

<ul>
<li>rubyforge_name : le nom du projet sur Rubyforge</li>
<li>author : le nom du créateur du gem</li>
<li>email :  l&#8217;email du créateur du gem</li>
<li>summary : Résumé sur le gem. En général on utilise celui donné sur rubyforge</li>

<li>description : Il s&#8217;agit de la description détaillée de votre gem. Pareil autant utilisé celle de Rubyforge.</li>

<li>url : l&#8217;url de votre projet sur rubyforge</li>

<li>changes : la liste du changelog. Par défaut il s&#8217;agit du premier paragraphe du fichier history.txt</li>

<li>extra_deps : on peux ajouter la liste de dépendance gem nécessaire à votre gem. De la manière suivante : <code>p.extra_deps << ['actionmailer', '>= 1.3.5']</code></li>

<li>remote_rdoc_rdir : il s&#8217;agit du chemin de base où sera déposé la rdoc généré de votre gem. Ca peux ainsi être envoyé sur le site qui vous est disponible par rubyforge.</li>
</ul>

<h1>Tâche rake utile</h1>

<p>Grâce à Hoe, beaucoup de tâche rake sont ajoutée en voici une petite liste avec l&#8217;intérêt de chacune :</p>

<ul>
<li>rake announce : génére un email et le post sur l&#8217;annonce de Rubyforge. Il se base sur le changelog généré à partir de change et description défini dans le RakeFile.</li>

<li>rake check_manifest : qui vérifie que votre manifest est correcte</li>

<li>rake gem : génére le gem en se basant sur la config Hoe. Le gem se trouve dans le dossier pkg</li>

<li>rake clean : supprime le dossier pkg</li>

<li>rake package : génére les différents packages de votre projet (tar.gz et gem) dans le dosser pkg</li>

<li>rake release : génére les paquets et envoie une annonce sur Rubyforge.</li>

<li>rake publish_docs : génére la rdoc du gem et l&#8217;upload sur le site de rubyrforge de votre gem.</li>

</ul>

<p>Il y a encore d&#8217;autre doc que vous pouvez découvrir sur leur <a href="http://seattlerb.rubyforge.org/hoe/">doc</a></p>

<p>Par contre un autre gem, <a href="http://newgem.rubyforge.org/">newgem</a> qui a été réalisé par <a href="http://drnicwilliams.com/">DrNic</a>. Je vais étudier ça de ce pas.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/10/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/8/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/telecharger-fichier-de-basecamp.html">Récupération de ses fichiers sur basecamp</a>
      </li>
    
      <li class="post">
        <a href="/translate-on-mongoid.html">Localize avec mongoid</a>
      </li>
    
      <li class="post">
        <a href="/mailtrap-l-aide-au-staging.html">Mailtrap l&#8217;aide au staging</a>
      </li>
    
      <li class="post">
        <a href="/une-journee-dediee-i-mongodb.html">Une journée dédiée à MongoDB</a>
      </li>
    
      <li class="post">
        <a href="/periodictimer-de-eventmachine-le-cron-simplifie.html">PeriodicTimer de EventMachine, le cron simplifié</a>
      </li>
    
      <li class="post">
        <a href="/oupsnow-0-5-0-est-sortie.html">Oupsnow 0.5.0 est sortie</a>
      </li>
    
      <li class="post">
        <a href="/pourquoi-ruby-et-ruby-on-rails-dans-le-developpement-dapplication-web.html">Pourquoi Ruby et Ruby On Rails dans le développement d&#8217;application web ?</a>
      </li>
    
      <li class="post">
        <a href="/que-cherche-un-developpeur-dans-une-offre-demploi.html">Que cherche un développeur dans une offre d&#8217;emploi ?</a>
      </li>
    
      <li class="post">
        <a href="/sortie-de-typo-5-4-0.html">Sortie de Typo 5.4.0</a>
      </li>
    
      <li class="post">
        <a href="/sortie-de-oupsnow-0-4-0.html">Sortie de Oupsnow 0.4.0</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/shingara">@shingara</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'shingara',
            count: 10,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("shingara", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/shingara" class="twitter-follow-button" data-show-count="true">Follow @shingara</a>
  
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Cyril Mougel -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'shinydevblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
