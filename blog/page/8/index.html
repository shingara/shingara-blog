
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Shiny happy people coding</title>
  <meta name="author" content="Cyril Mougel">

  
  <meta name="description" content="Traduction de la news #20 Le rapport de cette semaine couvre les changements du 5 Mai 2008 au 11 Mai 2008 (jour correspondant à l&#8217; &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.shingara.fr/blog/page/8/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Shiny happy people coding" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-11352302-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Shiny happy people coding</a></h1>
  
    <h2>Codons avec le sourire</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.shingara.fr" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/vivre-avec-rails-edge-20.html">Vivre avec Rails Edge #20</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-05-13T00:00:00+02:00" pubdate data-updated="true">May 13<span>th</span>, 2008</time>
        
         | <a href="/vivre-avec-rails-edge-20.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Traduction de la <a href="http://blog.codefront.net/2008/05/11/living-on-the-edge-of-rails-20-scriptdbconsole-and-flashnow-now-test-able/">news #20</a></p>

<p>Le rapport de cette semaine couvre les changements du 5 Mai 2008 au 11 Mai 2008 (jour correspondant à l&#8217;enregistrement de <a href="http://railsenvy.com/podcast/">Rails Envy podcast</a>).</p>

<h3>script/dbconsole</h3>

<p>Un script <code>script/dbconsole</code> a été ajouté et permet de se connecter à votre base de donnée en utilisant sa console.</p>

<p>Si vous avez par exemple besoin de vous connecter à votre base de donnée MySQL de production (pour mieux comprendre ce qu&#8217;il s&#8217;y passe!), vous pouvez lancer <code>RAILS_ENV=production script/dbconsole</code> et vous serez loggé à votre base de donnée en utilisant le client en ligne de commande de MySQL. Cela fonctionne aussi avec les bases de donnée PostgreSQL et SQLite.</p>

<p>Pour utiliser ce script dans votre application Rails, n&#8217;oubliez pas de lancer  <code>rake rails:update:scripts</code> après la mise à jour de votre Rails edge.</p>

<p>Cette jolie petite fonctionnalitée est dû à <a href="http://www.sanityinc.com/">Steve Purcell</a>, qui avait à l&#8217;origine un <a href="http://www.sanityinc.com/articles/rails-db-console">plugin de console de base de donnée</a>.</p>

<p>Révision concernant cette fonctionnalitée: <a href="http://github.com/rails/rails/commit/4a07103687084496b773e18a03b1f2f5e686f7ad">http://github.com/rails/rails/commit/4a07103687084496b773e18a03b1f2f5e686f7ad</a></p>

<h3>flash.now est désormais accessible dans les tests</h3>

<p>C&#8217;est quelque chose que <a href="http://www.pluitsolutions.com/2008/01/22/testing-flashnow-in-rails/">beaucoup</a> <a href="http://rhnh.net/2008/04/19/testing-flash-now-with-rspec">de dévelopeurs Rails</a>,<a href="http://blog.codefront.net/2006/09/03/some-functional-testing-gotchas-in-ruby-on-rails/">moi y compris</a> avaient trouvés en écrivant leur test, concernant les messages flash qui n&#8217;étaient pas initialisé avec <code>flash.now</code>. Principalement, vous ne pouviez pas tester le contenu de vos <code>flash.now</code> parce qu&#8217;ils étaient toujours vide avant que vos tests les atteignent.</p>

<typo:code lang="ruby"># Dans votre controller:
flash.now[:notice] = &#8216;You gotta be kidding me!&#8217;

# Dans votre test:
assert_equal &#8216;You gotta be kidding me!&#8217;, flash.now[:notice]
# FAILS parce que flash.now[:notice] est nil</typo:code>


<p><a href="http://zargony.com/">Andreas Neuhaus</a> a cherché comment cela fonctionne et à défini comment faire un test de <code>flash.now</code> qui fonctionne sans utiliser d&#8217;<code>assert_select</code>.</p>

<p>Révision concernant cette fonctionnalitée: <a href="http://github.com/rails/rails/commit/74eed6290e63111d1aad2b181692a84f4f040aea">http://github.com/rails/rails/commit/74eed6290e63111d1aad2b181692a84f4f040aea</a></p>

<p>Il n&#8217;y a pas grand chose à noté pour cette semaine mais si vous souhaitez connaitre tous les détails, vous souhaiterez probablement parcourir le <a href="http://github.com/rails/rails/commits/master">log des commits Rails</a>. Comme toujours, vous pouvez laissez toutes suggestions pour améliorer cette série de Vivre avec Rails.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/vivre-avec-rails-edge-19.html">Vivre avec Rails Edge #19</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-05-05T00:00:00+02:00" pubdate data-updated="true">May 5<span>th</span>, 2008</time>
        
         | <a href="/vivre-avec-rails-edge-19.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Traduction de la <a href="http://blog.codefront.net/2008/05/04/living-on-the-edge-of-rails-19-change_table-for-migrations-and-more/">news #19</a></p>

<p>Le rapport de cette semaine couvre les changements du 29 Avril 2008 au 4 Mai 2008 (jour correspondant à l&#8217;enregistrement de <a href="http://railsenvy.com/podcast/">Rails Envy podcast</a>).</p>

<h3>change_table pour les migrations d&#8217;ActiveRecord</h3>

<p>Merci à <a href="http://zilkey.com/">Jeff Dean</a>, qui a aussi <a href="http://zilkey.com/2008/4/29/new-rails-core-feature-proposal-super-sexy-migrations">blogué au sujet de la nouvelle fonctionnalité change_table des migrations d&#8217;ActiveRecord</a>. Vous pouvez donc maintenant changer une table avec un block comme ceci :</p>

<typo:code lang="ruby">change_table :videos do |t|
  t.add_timestamps
  t.add_belongs_to :goat
  t.add_string :name, :email, :limit =&gt; 20
  t.remove_column :name, :email # prend de multiples arguments
  t.rename :new_name
  t.string :new_string_column # execute avec le changement de nom de la table
end</typo:code>

<p>Parmis les principaux points à noter :</p>

<ul>
<li><code>add_XXX</code> permettant d&#8217;ajouter une nouvelle colonne, exemple : <code>add_string</code> qui ajoutera un nouveau champs string.</li>
<li>Bien-sûr,<code> add_timestamps</code> permet d&#8217;ajouter les champs datetime magics <code>created_at</code> et <code>updated_at</code></li>
<li><code>remove_column</code> peux dorénavant prendre plusieurs arguments.</li>
<li><code>rename</code> qui renommera la table.</li>
</ul>

<p>Très belle amélioration DRY proposée par <a href="http://zilkey.com/">Jeff Dean</a> une fois encore.</p>

<p>Révision concernant cette fonctionnalité : <a href="http://github.com/rails/rails/commit/96980bd561d79824b6cb6efbcbecdcbf8785d452">http://github.com/rails/rails/commit/96980bd561d79824b6cb6efbcbecdcbf8785d452</a></p>

<h3>ActiveRecord::Base.create prend un block comme ActiveRecord::Base.new</h3>

<p>Youpie, maintenant vous pouvez aussi créer (<code>ActiveRecord::Base.create</code>) un objet ActiveRecord avec un block en argument exactement comme vous pouviez le faire avec <code>ActiveRecord::Base.new</code>:</p>

<typo:code lang="ruby">@person = Person.create(params[:person]) do |p|
  p.name = &#8216;Konata Izumi&#8217;
  p.age = 17
end</typo:code>

<p>Merci a <a href="http://www.workingwithrails.com/person/11022-adam-meehan">Adam Meehan</a> pour ce patch.</p>

<p>Révision concernant cette fonctionnalité : <a href="http://github.com/rails/rails/commit/dd120ede53eaf71dee76894998a81626b7a689fc">http://github.com/rails/rails/commit/dd120ede53eaf71dee76894998a81626b7a689fc</a></p>

<h3>Bugfix: change_column doit permettre d&#8217;utiliser :null => true sur les champs qui ne l&#8217;étaient pas précédement.</h3>


<p>Vous pouvez désormais utiliser <code>change_column</code> dans vos migrations pour modifier une colonne en nullable si elle était précédement </code>NOT NULL</code>.</p>

<p>Ce bugfix est gentiment offert par Nate Wiger.</p>

<p>Révision concernant cette fonctionnalité : <a href="http://github.com/rails/rails/commit/10ef65a3b054270ed3d458ec8eb7c2b9a3e638f7">http://github.com/rails/rails/commit/10ef65a3b054270ed3d458ec8eb7c2b9a3e638f7</a></p>

<p>Comme toujours, vous pouvez laissez toutes suggestions pour améliorer cette série de Vive avec Rails.</p>

<p>Enfin merci à <a href="http://blog.codefront.net/">Chu Yeow</a> de <a href="http://blog.codefront.net/2008/05/01/living-on-the-edge-of-rails-in-french/">m&#8217;encourager dans la traduction de ses magnifiques news</a><p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/vivre-avec-rails-edge-18.html">Vivre avec Rails Edge #18</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-29T00:00:00+02:00" pubdate data-updated="true">Apr 29<span>th</span>, 2008</time>
        
         | <a href="/vivre-avec-rails-edge-18.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Traduction de la <a href="http://blog.codefront.net/2008/04/27/living-on-the-edge-of-rails-18/">news #18</a></p>

<p>Le rapport de cette semaine couvre les changement du 21 Avril 2008 au 27 Avril 2008 (Jour correspondant à l&#8217;enregistrement de <a href="http://railsenvy.com/podcast/">Rails Envy podcast</a>).</p>

<p>Très peu de chose interressant dans le rapport de cette semaine. Il y a eu
principalement un paquet de résolutions de bug et des <a href="http://github.com/rails/rails/commits/master">commits</a> pour la compatibilité avec Ruby 1.8.7.</p>

<h3>Introduction d&#8217;ActiveResource::Base.timeout et récupération de
Timeout::Error dans ActionResource::Connection</h3>

<p>I y a <a href="http://github.com/rails/rails/commit/105910429d5873dce677ef32eef5f705e0625d86">2</a>
<a href="http://github.com/rails/rails/commit/cf32baf915442ffe153ec0e4d8148f147776c30a">changements</a>
qui ont <a href="http://blog.codefront.net/2008/04/22/new-in-rails-activeresource-timeouts-and-why-it-matters/">été
expliqué par Chu Yeow</a> la semaine dernière
et ne seront donc pas détaillé. Lisez donc l&#8217;article <a href="http://blog.codefront.net/2008/04/22/new-in-rails-activeresource-timeouts-and-why-it-matters/">ActiveResource
timeouts and why it matters (en)</a></p>

<h3>Le type entier inteligent pour l&#8217;adaptater MySQL dans les migrations</h3>

<p>L&#8217;adaptater MySQL dans Rails fait correspondre la colonne de type
<code>integer</code> dans vos migrations aux type smalling, int ou biging
dépendant de l&#8217;option :limit.</p>

<p>Cela signifie qu&#8217;une migration comme ceci:</p>

<typo:code lang="ruby">
def self.up
  create_table :searches do |t|
    t.integer :foo, :limit => 2
  end
end
</typo:code>
<p>
Créera la colonne <code>foo</code> comme un type <code>smallint(2)</code>
dans votre base de donnée MySQL (au lieu de <code>int(2)</code> précédement). (Plus d&#8217;information sur <a href="http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html">les types numériques MySQL</a>
<p>

<p>Ce path a été réalisé par DHH.</p>

<p>Révision concernant cette fonctionnalité: <a href="http://github.com/rails/rails/commit/a37546517dad9f6d9a7de6e1dba4d960909d71e8">http://github.com/rails/rails/commit/a37546517dad9f6d9a7de6e1dba4d960909d71e8</a></p>
<p>Comme toujours, vous pouvez laissez tout suggestion pour améliorer cette série de Vive avec Rails.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/screencast-de-presentation-rails.html">Screencast de presentation rails</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-25T00:00:00+02:00" pubdate data-updated="true">Apr 25<span>th</span>, 2008</time>
        
         | <a href="/screencast-de-presentation-rails.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Il y a quelques jours, j&#8217;ai réalisé un <a href="http://blog.shingara.fr/articles/2008/04/22/screencast-francais-sur-la-realisation-dune-application-rails">premier screencast en français de démonstration sur la création d&#8217;une application Ruby on Rails</a>. Quelque semaine avant, j&#8217;ai soumis à la liste de RailsFR, une série de slide pour présenter Ruby on Rails auprès de développeur Java. Après quelques modification, j&#8217;ai obtenu une version quasi définitive. J&#8217;ai ainsi réalisé hier un screencast faisant défiler ces slides avec mes commentaires. Tous commentaires est encore une fois le bienvenue.</p>

<p><a href="http://shingara.fr/export/presentation-rails.mpeg">Download du screencast</a></p>
<p><a href="http://shingara.fr/export/presentation-rails.pdf">Download des slides</a></p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/vivre-avec-rails-edge-17.html">Vivre avec Rails Edge #17</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-24T00:00:00+02:00" pubdate data-updated="true">Apr 24<span>th</span>, 2008</time>
        
         | <a href="/vivre-avec-rails-edge-17.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Depuis le début, je suis les news de <a href="http://blog.codefront.net">Chu Yeow</a> concernant les nouveautés intégrés à Rails dans sa version de développement. J&#8217;ai décidé d&#8217;essayer de vous les traduire régulièrement ici.</p>

<p>Traduction de la <a href="http://blog.codefront.net/2008/04/20/living-on-the-edge-of-rails-17/">news #17</a>

<p>Peu de chose se sont passé cette semaine sur Edge Rails. Il semblerait que nous aillons un nouveau membre dans le Rails core, <a href="http://joshpeek.com/">Joshua Peek</a>. Le nouveau <a href="http://rails.lighthouseapp.com/">bug tracking de Rails</a> sur Lighthouse est pret à utiliser, donc vous pouvez y soumettre vos patchs et rapport de bug dessus.</p>

<p>Le rapport de cette semaine couvre les changements entre le 14 Avril 2008 et le 20 Avril 2008 (Jour correspondant à l&#8217;enregistrement de <a href="http://railsenvy.com/podcast/">Rails Envy podcast</a>).</p>
                               
<h3>caches_page conditionel</h3>
                                                     
<p>The <code>caches_pages</code> peuvent prendre une option <code>:if</code> pour indiquer quand une pave peux être vraiment caché via une Proc. Vous pouvez maintenant faire ceci par exemple:</p>
                                                                                                        
<typo:code lang="ruby">caches_page :index, :if => Proc.new { |c| !c.request.format.json? }</typo:code>
                                                                                            
<p>Cela met votre index en cache uniquement si le format de la requête n&#8217;est pas du JSON.</p>
                                                                                                 
<p>Cette fonctionnalité a été ajouté par <a href="http://deaddeadgood.com/">Paul Horsfall</a>.</p>
<p>Révision concernant cette fonctionnalité: <a href="http://github.com/rails/rails/commit/14a40804a29a57ad05ca6bffbe1e5334089593a9">http://github.com/rails/rails/commit/14a40804a29a57ad05ca6bffbe1e5334089593a9</a></p>

                                                                      
<h3>Nouvelle ActionView::TestCase pour tester les helpers des vues</h3>
                                                                  
<p>Rappelez vous comment vous pouvez actuellement utiliser <a href="http://blog.codefront.net/2007/12/27/dry-in-your-functional-and-actionmailer-tests-rails-20-a-feature-a-day-7/">les classes TestCase spécialisé pour tester les classes Controllers et ActionMailer (en)</a>? Désormai
s vous pourrez faire la même chose pour vos helpers de vues Rails avec la nouvelle classe ActionView::TestCase.</p>
                             
<p>Voici un petit exemple:</p>
                                          
<typo:code lang="ruby">module PeopleHelper
  def title(text)
    content_tag(:h1, text)
  end
                  
  def homepage_path
    people_path
  end
end
                                               
class PeopleHelperTest > ActionView::TestCase
def setup                                       
  ActionController::Routing::Routes.draw do |map|                        
    map.people &#8216;people&#8217;, :controller => &#8216;people&#8217;, :action => &#8216;index&#8217;
    map.connect &#8216;:controller/:action/:id&#8217;
  end
end
              
def test_title                         
  assert_equal &#8221;<h1>Ruby on Rails</h1>&#8221;, title(&#8220;Ruby on Rails&#8221;)
end

def test_homepage_path
  assert_equal &#8220;/people&#8221;, homepage_path
end</typo:code>
<p>Remercions Josh Peek pour cette jolie petite amélioration..</p>

<h3>mem_cache_store de ActiveSupport::Cache accepte des options</h3>

<p>Même si Memcache-client a été ajouté récement à ActiveSupport, on ne pouvait pas spécifié toutes les options de configuration derrière l&#8217;ip du serveur memcache. Maintenant vous pouvez passer beaucoup plus d&#8217;options comme ceci:</p>

<typo:code lang="ruby">config.action_controller.fragment_cache_store = :mem_cache_store, &#8216;localhost&#8217;, { :compression => true, :debug => true, :namespace => &#8216;foo&#8217; }</typo:code>

<p>Ce patch est de <a href="http://blog.innerewut.de/">Jonathan Weiss</a>.</p>
<p>Révision concernant cette fonctionnalité: <a href="http://github.com/rails/rails/commit/9e1d506a8cfedef2fdd605e4cbf4bf53651ad214">http://github.com/rails/rails/commit/9e1d506a8cfedef2fdd605e4cbf4bf53651ad214</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/migration-basee-sur-lheure-utc-et-plus-incremental.html">Migration basée sur l&#8217;heure utc et plus incremental</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-23T00:00:00+02:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2008</time>
        
         | <a href="/migration-basee-sur-lheure-utc-et-plus-incremental.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Depuis la <a href="http://dev.rubyonrails.org/changeset/9122">revision
r9122</a>, les migrations de Ruby on rails ne sont plus
incrémentale comme précédemment. En effet, elles sont désormais basé sur le
temps UTC. Cette évolution a comme principale intérêt d&#8217;éviter les problèmes
de conflits entre différentes branches de développement grâce à un prefix
unique.</p>

<p>Désormais lors de la création d&#8217;un fichier de migration vous aurez ainsi
ceci :</p>

<typo:code>
$ ./script/generate migration create_user
      create  db/migrate/20080422122512_create_user.rb
</typo:code>

<p>Pour compléter cette évolution, il y a eu l&#8217;ajout de 2 nouvelles tâches
rake. <code>rake db:migrate:up</code> et <code>rake db:migrate:down</code>. Il faut adjoindre à ces tâche la  la variable VERSION étant le numero de la VERSION a ajouter(up) ou
enlever(down). Les versions peuvent ainsi être ajoutées ou supprimées
indépendamments.</p>

<p>On pouvait avoir cette fonctionnalité dans la version 2.0 de rails avec le
plugin <a
href="http://revolutiononrails.blogspot.com/2007/02/plugin-release-enhanced-rails.html">enhanced migrations plugin</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/screencast-francais-sur-la-realisation-dune-application-rails.html">Screencast français sur la réalisation d&#8217;une application Rails</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-22T00:00:00+02:00" pubdate data-updated="true">Apr 22<span>nd</span>, 2008</time>
        
         | <a href="/screencast-francais-sur-la-realisation-dune-application-rails.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Alors que <a href="http://blog.shingara.fr/articles/2008/04/18/activer-la-capture-du-son-sous-linux-pour-xvidcap">je bloquais sur la capture de son sous Linux pour réaliser un screencast</a>, j&#8217;ai passé le pas et j&#8217;ai donc réalisé un joli et assez volumineux screencast.
</p>

<p>Le screencast que je vous propose dure pas moins de 1h20. J&#8217;y réalise une application avec le framework Ruby On Rails 2.0.2. Tout est commenté en Français ce qui est assez inédit je crois.</p>

<p>Au début, je réalise une application avec des méthodes agiles et création de test avant de les résoudre. Je crée l&#8217;application avec une génération par scaffold et modification pour un meilleur visuel.</p>

<p>Vous pouvez donc télécharger ce <a href="http://shingara.fr/export/first_rails_application.mpeg">screencast ruby on rails en français.</a></p>

<p>Tout avis est le bienvenue. C&#8217;est un premier jet et il y a donc pas mal d&#8217;erreur.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/suivi-des-evolutions-des-objets-model.html">Suivi des évolutions des objets Model</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-18T00:00:00+02:00" pubdate data-updated="true">Apr 18<span>th</span>, 2008</time>
        
         | <a href="/suivi-des-evolutions-des-objets-model.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Voici un nouveau billet rapportant quelques nouveautés de Rails edge futur 2.1 en cours de développement. Cette amélioration est du coté des Models. Désormais, ils arrivent à savoir quel attribut a changé ou non. Grâce à cette fonctionnalité, de nouvelles méthodes par introspection on été ajouté.</p>

<typo:code lang="ruby">
article = Article.find(:first)
article.changed?  #=> false

# Vérifie les changements des attributs individuellement
# avec attr_name_changed? accessor
article.title  #=> &#8220;Title&#8221;
article.title = &#8220;New Title&#8221;
article.title_changed? #=> true

# Accès au valeur précédente avec attr_name_was accessor
article.title_was  #=> &#8220;Title&#8221;

# On peux voit l&#8217;ancienne et nouvelle valeur avec attr_name_change accessor
article.title_change  #=> [&#8220;Title&#8221;, &#8220;New Title&#8221;]
</typo:code>

<p>On peux aussi savoir quel champs ont changé et suivant quel valeur :</p>

<typo:code lang="ruby">
# Recupere une liste des attribut qui ont changé
article.changed  #=> [&#8216;title&#8217;]

# Récupére un hash des attributs qui ont changé avec leur précédente et nouvelle valeurs
article.changes  #=> { &#8216;title&#8217; => [&#8220;Title&#8221;, &#8220;New Title&#8221;] }
</typo:code>

<p>Dès que vous enregistrez votre enregistrement alors cette fonctionnalité est complètement réinitialisée.</p>

<p>Un des grand avantage de cette fonctionnalité est l&#8217;ajout d&#8217;une nouvelle fonctionnalité possible au niveau de la mise à jour des données en Base de donnée. En effet, la requête généré peux être beaucoup plus faible. Actuellement, à chaque mise à jour, la requête SQL généré est composé de tous les champs de l&#8217;objet. Désormais on peux activer une option d&#8217;ActiveRecord pour permettre cela.</p>

<typo:code lang="ruby">
article = Article.find(:first)
article.title  #=> &#8220;Title&#8221;
article.subject  #=> &#8220;Edge Rails&#8221;

# Mise a jour d&#8217;un seul attribut
article.title = &#8220;New Title&#8221;

# Seulement l&#8217;attribut mis à jour est updaté dans la Base de donnée
article.save
  #=>  &#8220;UPDATE articles SET title = &#8216;New Title&#8217; WHERE id = 1&#8221;
</typo:code>

<p>Pour activer cette option, il faut mettre : <code>ActiveRecord::Base.partial_updates = true</code></p>

<p>Par contre pour les champs updated_at/on, ils ne seront modifié que dans le cas où un champs a réellement été modifié.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/activer-la-capture-du-son-sous-linux-pour-xvidcap.html">Activer la capture du son sous Linux pour xvidcap</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-18T00:00:00+02:00" pubdate data-updated="true">Apr 18<span>th</span>, 2008</time>
        
         | <a href="/activer-la-capture-du-son-sous-linux-pour-xvidcap.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Voulant tenter de faire des screencasts, j&#8217;ai jeté mon dévolu juste <a href="http://xvidcap.sourceforge.net/">xvidcap</a>. Durant, mon test, je n&#8217;arrivais pas à faire de capture du son. J&#8217;avais bien branché mon micro et je pouvais l&#8217;entendre dans les enceintes. Mais il n&#8217;était pas capturé. je vais donc indiquer toutes les modifications que j&#8217;ai réalisé pour que ça marche, car ce n&#8217;est pas la première fois que j&#8217;ai ce genre de problème.</p>

<h3>XvidCap n&#8217;écoute que OSS</h3>

<p>En effet, xvidcap n&#8217;écoute que le point /dev/dsp, il faut donc réaliser la compatibilité OSS si vous utilisez alsa.</p>

<h3>Activer la capture du micro</h3>

<p>Ensuite, il faut penser à vérifier que la capture du son soit bien activé dans alsamixer. Pour cela, il suffit d&#8217;aller sur la partie Capture d&#8217;alsamixer. Pour y arriver, une petite tabulation suffit. Le screenshot suivant montre le cas de capture désactivé.</p>

<p style="text-align: center;">
<img src="http://blog.shingara.fr/files/alsamixer-capture-desabled.png" alt="screenshot d alsamixer avec la capture son desactive" >
</p>

<p>Il suffit ensuite d&#8217;aller sur les éléments désactivés et d&#8217;appuyer sur espace pour valider la capture. On obtient ainsi l&#8217;écran suivant :</p>


<p style="text-align: center;">
<img src="http://blog.shingara.fr/files/alsamixer-capture-activate.png" alt="screenshot d alsamixer avec la capture son active" >
</p>

<p>J&#8217;ai ainsi pu enfin réussir mon test de screencast pour réaliser les screencasts que je souhaite.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/loader-toutes-les-fixtures-avec-les-story-de-rspec.html">Loader toutes les fixtures avec les Story de Rspec</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-07T00:00:00+02:00" pubdate data-updated="true">Apr 7<span>th</span>, 2008</time>
        
         | <a href="/loader-toutes-les-fixtures-avec-les-story-de-rspec.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Dans un article précédent, j&#8217;ai décrit <a href="http://blog.shingara.fr/articles/2008/04/03/et-si-on-ecrivait-une-histoire-a-rails">comment utiliser les stories de Rspec avec Rails</a>. Mais j&#8217;ai indiqué qu&#8217;il n&#8217;y avait pas la possibilité d&#8217;utiliser la méthode fixtures directement. Mais ce n&#8217;est pas pour ça qu&#8217;on ne peux pas loader les fixtures. Je vais vous expliquer comment faire.
</p>

<h3>Définir où se trouve les fixtures.</h3>

Dans le helper.rb, on peux définir où se trouve le dossier contenant les fixtures :

<typo:code lang="ruby">
ENV[&#8220;RAILS_ENV&#8221;] = &#8220;test&#8221;
require File.expand_path(File.dirname(__FILE__) + &#8220;/../config/environment&#8221;)
require &#8216;spec/rails/story_adapter&#8217;

Spec::Runner.configure do |config|
  # If you&#8217;re not using ActiveRecord you should remove these
  # lines, delete config/database.yml and disable :active_record
  # in your config/boot.rb
  config.use_transactional_fixtures = true
  config.use_instantiated_fixtures  = false
  config.fixture_path = RAILS_ROOT + &#8216;/spec/fixtures/&#8217;
end
</typo:code>

<p>La configuration fixture_path permet ainsi de définir où se trouve le dossier contenant les fixtures. Dans mon cas c&#8217;est le dossier de fixtures de Rspec.</p>

<h3>Définir des steps qui load les fixtures</h3>

<p>On peux faire une étape qui permette de loader toutes les fixtures :</p>

<typo:code lang="ruby">
  Given &#8220;load all fixtures&#8221; do
    [&#8220;galleries&#8221;, &#8220;pictures&#8221;, &#8220;thumbnails&#8221;, &#8220;users&#8221;, &#8220;settings&#8221;].each { |fixture|
      Fixtures.create_fixtures(Test::Unit::TestCase.fixture_path, fixture)
    }
  end
</typo:code>

<p>En appelant &#8220;load all fixtures&#8221; on chargera ainsi toutes les fixtures définis dans la liste. On les appelles de la même manière qu&#8217;avec la méthode fixtures</p>

<p>On peux aussi faire une steps qui ne load qu&#8217;une fixtures en particulier</p>

<typo:code lang="ruby">
  Given &#8220;load fixtures &#8216;$fixture&#8217;&#8221; do |fixtures|
      Fixtures.create_fixtures(Test::Unit::TestCase.fixture_path, fixtures)
  end
</typo:code>

<h3>Appeler les étapes dans son histoire</h3>

<p>
Une fois ces étapes définis on peux ainsi facilement les utiliser dans ses stories en plain-text.
</p>

<typo:code>
Story: Mon Histoire

  Scenario: Une beau scénario

     Given load all fixtures
     When we go to &#8216;/&#8217;
     Then we are redirect to &#8216;/login&#8217;

  Scenario: Un autre scénario

     Given load fixtures &#8216;galleries&#8217;
     And load fixtures &#8216;users&#8217;
     When we go to &#8216;/&#8217;
     Then we are redirect to &#8216;/login&#8217;     
</typo:code>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/9/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/7/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/tester-ses-vues-rabl.html">tester ses vues rabl</a>
      </li>
    
      <li class="post">
        <a href="/vundle-ou-le-bundler-de-vim.html">vundle ou le bundler de vim</a>
      </li>
    
      <li class="post">
        <a href="/dante-pour-mettre-du-daemon-dans-son-code.html">dante pour mettre du daemon dans son code</a>
      </li>
    
      <li class="post">
        <a href="/moped-le-nouveau-driver-mongodb-pour-ruby.html">moped le nouveau driver mongodb pour ruby</a>
      </li>
    
      <li class="post">
        <a href="/quiet-assets-le-limiteur-de-log.html">Quiet Assets le gem qui limite les logs</a>
      </li>
    
      <li class="post">
        <a href="/telecharger-fichier-de-basecamp.html">Récupération de ses fichiers sur basecamp</a>
      </li>
    
      <li class="post">
        <a href="/translate-on-mongoid.html">Localize avec mongoid</a>
      </li>
    
      <li class="post">
        <a href="/mailtrap-l-aide-au-staging.html">Mailtrap l&#8217;aide au staging</a>
      </li>
    
      <li class="post">
        <a href="/une-journee-dediee-i-mongodb.html">Une journée dédiée à MongoDB</a>
      </li>
    
      <li class="post">
        <a href="/periodictimer-de-eventmachine-le-cron-simplifie.html">PeriodicTimer de EventMachine, le cron simplifié</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/shingara">@shingara</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'shingara',
            count: 10,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("shingara", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/shingara" class="twitter-follow-button" data-show-count="true">Follow @shingara</a>
  
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Cyril Mougel -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'shinydevblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
