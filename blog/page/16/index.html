
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Shiny happy people coding</title>
  <meta name="author" content="Cyril Mougel">

  
  <meta name="description" content="Java 6 est sorti depuis quelques temps et il est aussi disponible sur debian. Je vais donc expliquer rapidement comment l&#8217;installer et surtout &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.shingara.fr//blog/page/16/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Shiny happy people coding" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-11352302-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Shiny happy people coding</a></h1>
  
    <h2>Codons avec le sourire</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.shingara.fr/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/java-6-sur-debian.html">Java 6 sur Debian</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-01-21T00:00:00+01:00" pubdate data-updated="true">Jan 21<span>st</span>, 2007</time>
        
         | <a href="/java-6-sur-debian.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Java 6 est sorti depuis quelques temps et il est aussi disponible sur debian. Je vais donc expliquer rapidement comment l&#8217;installer et surtout le mettre en place :)
</p>

<ul>
<li>Se connecter en tant que root</li>
<li>Installer java 6 : <code># aptitude install sun-java6-jdk</code></li>
<li>Définir Java 6 comme la JVM par défaut de votre debian : <code># update-java-alternatives -s java-6-sun</code></li>
</ul>

<p>
La commande update-java-alternative permet de mettre à jour et définir votre environnement JVM. C&#8217;est une commande très simple et ca vous permet de basculer d&#8217;une version à l&#8217;autre très facilement.
</p>

<p>
Sinon je rappelle que sun a voulu que Java soit compatible de façon ascendante. En conséquence, il n&#8217;y a aucun risque sur vos applications développé en Java 1.4 ou Java 5. elles fonctionneront. J&#8217;ai ainsi par exemple lancé tomcat 5.5 et mon site Web que je crée en Java et je n&#8217;ai eu aucun problème.
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/hibernate-et-les-mappings.html">Hibernate et les mappings</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-01-16T00:00:00+01:00" pubdate data-updated="true">Jan 16<span>th</span>, 2007</time>
        
         | <a href="/hibernate-et-les-mappings.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Salut, Je fais appel au net pour une logique de conception Java et surtout une aide sur Hibernate. En effet sans système de mapping Hibernate j&#8217;aurais trouvé la solution que je veux, mais là je veux utiliser au maximum de les possibilités d&#8217;Hibernate. Voici ce que je désire faire :
</p>

<p>
J&#8217;ai des listes avec un nom. Dans chaque listes, il y a des produits. Mais pour chaque listes il peux y avoir plusieurs fois le même produit. Voici les deux solutions que j&#8217;ai au niveau SQL pur :
</p>

<h2>Tout en SQL</h2>

<p>Cette solution se base sur le comptage du nombre de lien entre une liste et un produit.</p>

<pre>
CREATE TABLE List (
  id INT PRIMARY KEY,
  name VARCHAR,
);

CREATE TABLE Product (
  id INT PRIMARY KEY,
  name VARCHAR,
);

CREATE TABLE ListToProduct (
  id int PRIMARY KEY,
  Product_id int,
  List_id int,
);
</pre>

<p>Sur cette table pour savoir le nombre de produit A dans la liste B il faut faire en SQL pur une requête de type <code>SELECT COUNT(*) FROM ListToProduct WHERE Product_id='A' AND List_id='B'</code> où A et B sont les id respectif de notre produit et liste.</p>

<p>Au niveau d&#8217;hibernate, j&#8217;ai trouvé comment faire un mapping assez simple pour obtenir la liste des Produits d&#8217;un liste :</p>

<pre>
    &lt;list name="listsName" table="ListToProduct" &gt;
	&lt;key column="product_id" /&gt;
        &lt;index column="list_name_to_product_id" /&gt;
        &lt;many-to-many column="list_id" class="List" /&gt;
    &lt;/list>
</pre>

<p>Au niveau du type de retour dans mon POJO, j&#8217;ai un attribut du type List&lt;Produit&gt;. Ca marche très bien dans un système de navigation entre mes produits et listes. Mais je me suis trouvé confronté au problème du comptage. Combien il y a de Produit A dans ma liste B. La seule solution est de faire :</p>
<ul>
<li>Soit une requete SQL par ligne avec un COUNT(*)</li>
<li>Soit un parcours de ma liste pour compter le nombre d&#8217;occurrence.</li>
</ul>

<p>Je ne pense pas qu&#8217;aucune de ces deux techniques soit très performante. De même je n&#8217;ai trouvé aucun système au sein d&#8217;hibernate pour avoir immédiatement le résultat. Comme dans une sous-requête avec un DISTINCT peut-être ?</p>

<h2>Faire le comptage directement en base de Donnée</h2>

<p>Normalement en SQL pur et propre il est recommandé de ne pas faire de calcul directement dans la Base de donnée. On ne doit rien stocker qui est potentiellement calculable. Dans notre cas, l&#8217;ajout du nombre de Produit dans la liste au niveau de la table de liaison permet de diminuer potentiellement le nombre de ligne d&#8217;enregistrement tout en augmentant le nombre de colonne. Théoriquement l&#8217;amélioration peux peux-être interressante si toutes nos listes ont en moyenne plus de 3 produits.</p>

<p>La nouvelle base de donnée serait donc identique à la précédente sauf la table ListToProduct qui serait la suivante :</p>

<pre>
CREATE TABLE ListToProduct (
  id int PRIMARY KEY,
  Product_id int,
  List_id int,
  count int,
);
</pre>

<p>Avec cette technique, au lieu de rajouter une ligne dans la table de liaison au moment de l&#8217;ajout d&#8217;un produit existant dans une liste, le compteur est incrémenté. Il ne reste donc ensuite qu&#8217;à lire la valeur dans count pour savoir le nombre exacte de Produit du type A dans la liste B. Cette technique me semble assez intéressantes. Mais voilà, je suis incapable de la mettre en place avec un mapping hibernate. J&#8217;ai testé les components, les many-to-one. Mais rien n&#8217;y fait. Il doit vraiment y avoir un truc que je n&#8217;ai pas compris et je ne sais pas quoi. C&#8217;est aussi pour ca que je fais appel à tous.</p>

<p>
Donc si vous avez une idée sur la meilleur solution à employer et aussi comment la mettre en place avec Hibernate, je suis preneur.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/ladaptation-par-le-python.html">L&#8217;adaptation par le Python</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-01-02T00:00:00+01:00" pubdate data-updated="true">Jan 2<span>nd</span>, 2007</time>
        
         | <a href="/ladaptation-par-le-python.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
J&#8217;ai trouvé avec le <a href="http://uname.tuxaco.net/">blog de Jadawin</a> un <a href="http://back.tuxaco.net">script</a> qu&#8217;il a créé pour mettre à jour son fond d&#8217;écran pour les linuxiens dont je fais partie. Il a créé ce script en Perl et moi je suis un pythonien alors juste pour rigoler, j&#8217;ai refait tout le script en Python. Et le <a href="/script/python/back.py">voici</a> pour vous. C&#8217;est pour l&#8217;instant ma version 0.1.
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/diffe%CC%81rence-entre-netbeans-et-eclipse-episode-2.html">Différence entre Netbeans et Eclipse Episode 2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-12-21T00:00:00+01:00" pubdate data-updated="true">Dec 21<span>st</span>, 2006</time>
        
         | <a href="/diffe%CC%81rence-entre-netbeans-et-eclipse-episode-2.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Alors que j&#8217;ai encore passé une bonne soirée à installer mon environnement de développement et j&#8217;ai heureusement fini par y arriver. Maintenant je ne vais plus y toucher du tout et faire en sorte que ca soit stable. Je pense aussi avoir compris d&#8217;où vient le problème. En effet, mon projet a été créé avec une version d&#8217;eclipse plugger qui s&#8217;appele <a href="http://www.easyeclipse.org/site/home/">easyeclipse</a> version 1.0.1 basé sur <a href="http://www.eclipse.org">Eclipse</a> 3.1. Chez moi j&#8217;ai donc voulu upgrader eclipse et passer par easyeclipse 1.2.1 qui est basé sur Eclipse 3.2. Mais voilà le changement de version est pas très apprécié par Eclipse. En conséquence,  je pense que mes problèmes étaient principalement lié à cette modification d&#8217;environnement.
</p>

<p>
Ce qui m&#8217;amène au problème que je ressens avec Eclipse et son support SVN. En effet, une fois que tu as fait le premier commit de ton application avec une version d&#8217;Eclipse il ne faut pas changer. même pour d&#8217;autre version comme <a href="http://forge.objectweb.org/projects/lomboz">Lomboz</a> ou <a href="http://www.myeclipseide.com/">MyEclipse</a>. En effet, chacun d&#8217;eux a sa propre gestion des serveurs type Tomcat et ne permet d&#8217;attacher qu&#8217;un projet de leur jus au serveur. Mais par contre comme <a href="http://www.netbeans.org">netbeans</a> intégre de base une gestion de serveur type Tomcat, avec l&#8217;import SVN. Il est ainsi très facile de créer un projet web et de lui donner les valeurs de checkout de notre SVN. Alors qu&#8217;avec Eclipse en faisant un Checkout nous ne pouvons que créer un nouveau projet. Nous ne pouvons pas l&#8217;attacher à un projet existant :(.
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/netbeans-et-eclipse-pour-du-j2ee.html">NetBeans et Eclipse pour du J2EE</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-12-20T00:00:00+01:00" pubdate data-updated="true">Dec 20<span>th</span>, 2006</time>
        
         | <a href="/netbeans-et-eclipse-pour-du-j2ee.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Actuellement devant coder une application J2EE pour mon école, j&#8217;ai pris le temps de tester un peu deux gros IDE libres existant sur le marché pour développer du J2EE. Voici un très rapide comparatif que je vais faire.
</p>

<p>
Au premier abord Eclipse est de loin le meilleur, mais a de gros problèmes de plugin. Ainsi je me retrouve à ne plus pouvoir ouvrir une JSP sans faire planter eclipse, ce qui est assez gênant pour faire du J2EE. 
</p>

<p>
En passant sous netbeans, j&#8217;y ai vu une intégration complète de gestion de serveur Web type TOMCAT ainsi, j&#8217;ai juste à définir mon contexte et tout est fait. Mais voilà j&#8217;ai trouvé un problème que je considère majeur dans le développement rapide d&#8217;application web, l&#8217;obligation de recréer complètement le projet à chaque déploiement. Ainsi, je suis obligé de copier mes sources, les compilés et créer un WAR pour enfin déployer l&#8217;application. Cela prend ainsi très facilement 5 min à faire et tout ça pour une application qui ne compte encore que 2 pages. Déjà que je pestais contre les 5 secondes de redémarrage de Tomcat, les 5 min seront hélas de trop pour moi. Espérons que cela sera implémenté dans les futurs version de netbeans et on aura un produit vraiment très sympa qui pourra complètement rivaliser avec Eclipse.
</p>

<p>
On voit tout de suite le problème de développement d&#8217;application J2EE, la compilation est très longue. C&#8217;est là que les langages de scripting permettent de gagner beaucoup de temps.
</p>

<p>
En tout cas après une soirée de tentative de mise en place d&#8217;un projet J2EE sur mon PC, je suis bon pour recommencer vu que je n&#8217;ai toujours pas réussi.
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/et-si-rails-e%CC%81tait-si-ge%CC%81nial.html">Et si Rails était si génial ?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-12-15T00:00:00+01:00" pubdate data-updated="true">Dec 15<span>th</span>, 2006</time>
        
         | <a href="/et-si-rails-e%CC%81tait-si-ge%CC%81nial.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Ce soir, j&#8217;ai eu la chance d&#8217;assister à trois conférences au sujet de <a href="http://www.rubyonrails.org/">Ruby On Rails</a>. Ces conférences étaient issues des conférences de <a href="http://paris.onrails.info/">Paris On Rails</a>.</p>

<p>Après ces présentations et ma grosse difficulté à réaliser un site web en J2EE avec Struts et hibernate où pour faire une simple page, il faut remplir 4Km de fichier de configuration, je me dis vraiment que Rails c&#8217;est simple. Il te suffit de si peu de code pour faire une application web original, avec test unitaire et tout. C&#8217;est impressionnant. Par contre la réflexion que certain de mes camarades ont eu et que je comprends tout en pensant un peu la même chose c&#8217;est que finalement, a quoi sert le développeur dans tout ça ? N&#8217;est-ce pas justement pour ça que Java est si verbeux ? pour faire écrire et encore écrire le développeur ?</p>

<p>Au final, moi qui pensait réaliser ma prochaine application web en Python, je pense que je vais finalement la réaliser en Ruby avec RoR. En effet, même si le Python est beaucoup moins verbeux que le Java, il l&#8217;est quand même un plus que le RoR au niveau de son mapping Objet Relationnel tout du moins. Il lui manque aussi beaucoup de test unitaire et fonctionnel simple d&#8217;execution. Par contre le seul gros défaut de RoR à mon avis est quand même ses performances. Le Python semblerait plus rapide pour ça, d&#8217;après les tests disséminés sur internet et même selon les développeurs de la communauté RoR. Mais vu que je fais du Python quotidiennement à mon travail et que je vais apprendre le RoR en fin d&#8217;année dans mon cursus scolaire. Je vais donc créer mon prochain projet en Ruby On Rails et qui sait si un jour je suis assez fou pour me lancer dans l&#8217;aventure, transcrire tout RoR en Python et créer ainsi PyRor ;)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/schemaspy-aide-les-de%CC%81veloppeurs.html">SchemaSpy aide les développeurs</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-12-08T00:00:00+01:00" pubdate data-updated="true">Dec 8<span>th</span>, 2006</time>
        
         | <a href="/schemaspy-aide-les-de%CC%81veloppeurs.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Ca faisait quelque temps, au niveau de mon stage, j&#8217;utilise une Base de donnée avec plusieurs dizaines de Tables différentes. Mais voilà, aucun document n&#8217;a été réalisé pour suivre l&#8217;évolution de cette Base de Donnée et la seule solution que j&#8217;avais pour la consulter, c&#8217;était de me connecter sur la BDD et de faire mes requêtes directement. J&#8217;ai finalement décidé de me prendre en main et de faire ce document. Mais en tant que bon informaticien, je suis flemmard et j&#8217;ai donc cherché une application qui me permettait de tout faire à ma place. Après plusieurs recherche infructueuse, j&#8217;ai fini par trouver mon bonheur. Il s&#8217;agit de <a href="http://schemaspy.sourceforge.net/">SchemaSpy</a>. Vous pouvez voir un exemple sur leur <a href="http://schemaspy.sourceforge.net/sample/">site</a>. Ce programme est un programme Java et il génére les graphiques à l&#8217;aide de <a href="http://www.graphviz.org/">Graphviz</a>.
</p>

<p>
Après plusieurs essais infructueux, j&#8217;ai découvert que ce projet manquait par contre d&#8217;une documentation plus ou moins simple et explicite. Je vais donc expliquer brievement ici comment faire.
</p>

<ul>
<li>Installer le JRE 5.0 sur le site internet de Sun</li>
<li>
Télécharger le jar driver de la Base de Donnée que vous voulez consulter. Dans mon cas j&#8217;utilise <a href="http://mysql.com">MySQL</a> et vous pouvez le télécharger <a href="http://dev.mysql.com/downloads/connector/j/5.0.html">ici</a>
</li>
<li>Installer Graphviz si vous désirez la création des graphiques</li>
</ul>

<p>Maintenant la ligne de commande pour analyser une base de donnée MySQL il faut faire :</p>

<pre>$java -jar schemaspy -t mysql  -host localhost -db mydatabase -u user -p password -o output</pre>

<p>
Mais voilà pour moi cela n&#8217;a pas marché. j&#8217;ai donc lu le source du jar et compris comment créer un fichier de configuration pour schemaSpy. Je vais vous expliquer comment en faire un. Voici le fichier que j&#8217;ai appelé <b>mymysql.properties</b>
</p>

<pre>
# note that MySQL tables must be of type 'InnoDB' or they won't
# have foreign key relationships
description=MySQL

# connection spec
#  text between &lt;&gt;'s will be prompted for on the command line
#    e.g. if &lt;host&gt; is in connectionSpec then you must have -host on the command line
#  if you're missing a required parameter then you're be prompted with the text
#  that's associated with that paramter
#    e.g. missing -db then you'll be prompted for 'database name'
# expected format: jdbc:mysql://[hostname][:port]/dbname
connectionSpec=jdbc:mysql://localhost/
#host=hostname[:port] (possibly just localhost)
db=databasename

driver=com.mysql.jdbc.Driver

# point this to whatever is appropriate on your machine...let me know if there's a standard path/jar
# you can use the -cp command line option if you prefer
# The driver should be available at www.mysql.com/products/connector/j/
driverPath=mysql-connector-java-3.1.13-bin.jar

# if your driver returns failures like "stream already closed" then its metadata
# services probably aren't thread safe and you'll have to uncomment this line
# or specify "-dbThreads 1" on the command line.
#dbThreads=1

# the following SQL is optional
# fill it in if you want to see the SQL used to create your views or your check constraints
# send it back to schemaspy.sourceforge.net if it works
# these named parameters are supported: :schema, :owner, :table and :view

# return text that represents a specific :view / :schema
#selectViewSql=

# return table_name, constraint_name and text for a specific :schema
#selectCheckConstraintsSql=

# return table_name, comments for a specific :schema (which MySQL doesn't have, so the db name will be used)
# useful if db driver doesn't return this info
selectTableCommentsSql=select table_name, table_comment comments from information_schema.tables where table_schema=:schema

# return table_name, column_name, comments for a specific :schema
# useful if db driver doesn't return this info
#selectColumnCommentsSql=select table_name, column_name, column_comment comments from information_schema.columns where table_schema=:schema
</pre>

<p>Sur le fichier précédent, vous n&#8217;avez qu&#8217;à changer le lien de votre jar MysqlConnector et le nom de la Base de donnée que vous voulez consulter. Une fois ce fichier créer, il suffit de faire comme appele au programme schemaspy la commande suivante :</p>

<pre>$java -jar schemaspy -t mymysql -u user -p password -o output</pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/html2latex-et-ses-options-miracles.html">Html2Latex et ses options miracles</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-11-07T00:00:00+01:00" pubdate data-updated="true">Nov 7<span>th</span>, 2006</time>
        
         | <a href="/html2latex-et-ses-options-miracles.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Ca fait plusieurs fois que je me dis que tous mes documents qui sont créés à partir de fichier LaTeX devrait être exportés en PDF et en HTML. Mais je n&#8217;avais jamais trouvé de « bonne » sortie de mes fichiers LaTeX en HTML. J&#8217;avais testé html2latex et Hevea. Mais mes premiers tests m&#8217;avait fait adopter Hevea à cause de sa sortie en une seule page et son support de l&#8217;utf8. Mais voilà qu&#8217;aujourd&#8217;hui Hevea ne veux pas me lire mes fichiers en UTF-8 et bloque avec. J&#8217;ai donc pris le temps de me repencher sur html2latex et je suis revenu sur mes premières impressions, c&#8217;est génial. Voici en fait les options qu&#8217;il me manquait :
</p>
<ul>
<li>-html_version 4.0,unicode : qui permet d&#8217;avoir un document en UTF-8 si nous l&#8217;avons créer ainsi</li>
<li>-no_navigation : qui permet de ne pas avoir le petit système de navigation en haut de la page</li>
<li>-split 0 : qui permet de n&#8217;avoir qu&#8217;un seul fichier HTML et non un par partie</li>
<li>-info &#8216;blabla&#8217; : qui permet de mettre son propre « A propos » et non pas celui défini de base par html2latex</li>
</ul>

<p>Je crois que ces options peuvent aussi être défini directement à partir d&#8217;un fichier de configuration, mais je n&#8217;ai pour l&#8217;instant pas rechercher comment faire</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/plugin-sound-pl-de-weechat.html">Plugin sound.pl de weechat</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-10-07T00:00:00+02:00" pubdate data-updated="true">Oct 7<span>th</span>, 2006</time>
        
         | <a href="/plugin-sound-pl-de-weechat.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
Avec un ami, nous utilisons tous les deux le logiciel <a href="http://weechat.flashtux.org">weechat</a>.
J&#8217;ai adopté ce logiciel pour quatre points :
</p>

<ul>
<li>Son environnement ncurse, environnement que j&#8217;utilisais déjà avec IRSSI.</li>
<li>Sa rapidité de développement. En effet ce projet a de fréquente release. On
  me dira que c&#8217;est normal vu que irssi a déjà tout et donc il n&#8217;a plus rien à ajouter.
  Mais cela serait un énorme troll et ce n&#8217;est pas mon but ici.</li>
<li>La possibilité de voir le nom des personnes connectés sur le salon</li>
<li>sa facilité de configuration à partir d&#8217;un simple fichier de configuration.</li>
</ul>

<p>
Comme je fais tourner ce logiciel dans un screen, j&#8217;ai voulu que pour chaque Highlight et
message en privé, un son me soit envoyé pour ainsi pouvoir répondre si le temps me le permet.
</p>
<p>
Après quelque recherche sur le site de weechat, j&#8217;ai découvert un plugin déjà existant qui permettait
de faire cela. Il s&#8217;agit du script sound.pl. Il est réalisé en perl. Après m&#8217;être battu sur sa configuration
et avoir
constaté que mon ami ce battait aussi sur le même problème, j&#8217;ai pris le taureau par les cornes et
j&#8217;ai décidé de voir où était le problème et le patcher le cas échéant.
</p>
<p>
Voici donc le symptôme que j&#8217;ai constaté :
</p>
<p>
Si le script est lancé une fois sans avoir été modifié au préalable, nous
  avons beau modifier le fichier sound.pl pour indiquer les nouvelles valeurs de commande,
  celle-ci ne sont pas prise en compte. J&#8217;ai donc découvert que dans le fichier ~/.weechat/plugin.rc,
  les valeurs pour les commandes à effectuer en cas de highlight sont celle d&#8217;origine et non celle indiqué
  dans mon fichier. Si je modifie ces valeurs directement dans le fichier ~/.weechat/plugin.rc, les
  commandes sont effectuées lors du highlight suivant.
</p>
<p>
Mes connaissances en perl sont limité, mais je pensais bien que le problème constaté devait avoir une
raison assez simple. En éditant le code, j&#8217;ai donc trouvé les lignes incriminés. Il s&#8217;agit des lignes 41, 42 et 43.
</p>
<p>
Sur ces lignes, le programme va chercher si les valeurs cmd_highlight, cmd_pv et cmd_ctcp existent et
si elles n&#8217;existent pas, le programme va les créer et les initialiser avec les valeurs définis plus haut dans le programme.
Par contre, il n&#8217;y a aucune vérification d&#8217;un changement de valeur. En effet si cette fois-ci nous rajoutons un
test de vérification de changement de valeur, les valeurs sont changé. Ainsi l&#8217;utilisateur une fois avoir redéfini
ses valeurs dans le fichier sound.pl devra juste relancer le script et les nouvelles valeurs seront remplacées dans le
~/.weechat/plugin.rc
</p>
<p>
Voici donc le patch que je préconise :
</p>

<pre>
--- sound.pl    2006-10-06 23:46:22.000000000 +0200
+++ sound-0.4.pl        2006-10-06 23:46:06.000000000 +0200
@@ -39,8 +39,11 @@

 weechat::register("Sound", $version, "", "Sound for highlights/privates & CTCP sound events");
 weechat::set_plugin_config("cmd_highlight", $default_cmd_highlight) if (weechat::get_plugin_config("cmd_highlight") eq "");
+weechat::set_plugin_config("cmd_highlight", $default_cmd_highlight) if (weechat::get_plugin_config("cmd_highlight") ne $default_cmd_highlight);
 weechat::set_plugin_config("cmd_pv", $default_cmd_pv) if (weechat::get_plugin_config("cmd_pv") eq "");
+weechat::set_plugin_config("cmd_pv", $default_cmd_pv) if (weechat::get_plugin_config("cmd_pv") ne $default_cmd_pv );
 weechat::set_plugin_config("cmd_ctcp", $default_cmd_ctcp) if (weechat::get_plugin_config("cmd_ctcp") eq "");
+weechat::set_plugin_config("cmd_ctcp", $default_cmd_ctcp) if (weechat::get_plugin_config("cmd_ctcp") ne $default_cmd_ctcp);

 weechat::add_message_handler("PRIVMSG", "sound");
 weechat::add_message_handler("weechat_highlight", "highlight");
</pre>

<p>
 Je vais soumettre ce patch à l&#8217;auteur du script. En tout cas, j&#8217;espère que cette petite explication permettra au
 prochain utilisateur de weechat avec son plugin sound.pl de moins bloquer sur la configuration du plugin.
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/merci-marco-ditri.html">Merci Marco d&#8217;Itri</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-09-09T00:00:00+02:00" pubdate data-updated="true">Sep 9<span>th</span>, 2006</time>
        
         | <a href="/merci-marco-ditri.html#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Je voulais faire un petit billet, pour remercier ce très cher Marco d&#8217;Itri. Grâce à lui, je me suis retrouvé ce matin avec un ordinateur inutilisable. En effet, cette gentille personne est le mainteneur du paquet debian udev. Pour ceux qui ne le savent pas, udev est maintenant une pierre de voute de linux. Grâce à lui, les modules du noyau necessaire sont chargé. Ainsi, sans udev, on se retrouve comme moi ce matin :</p>

<ul>
<li>Plus de reseau car carte réseau non détecté</li>
<li>Plus de X, car xorg ne détecte pas ma souris</li>
<li>Plus de possibilité de lire une clé usb</li>
</ul>

<p>Pour réparer ce problème, ma seule solution fut un downgrade de udev, de la version 0.100-1 à la version 0.093-2.</p>

<p>Ainsi, je vous le dit, n&#8217;upgradez pas la version 0.100-1, vous risqueriez des problèmes. Pour marco, je lui conseillerais de passer un peu par expérimentale de temps en temps.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/17/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/15/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/dante-pour-mettre-du-daemon-dans-son-code.html">dante pour mettre du daemon dans son code</a>
      </li>
    
      <li class="post">
        <a href="/moped-le-nouveau-driver-mongodb-pour-ruby.html">moped le nouveau driver mongodb pour ruby</a>
      </li>
    
      <li class="post">
        <a href="/quiet-assets-le-limiteur-de-log.html">Quiet Assets le gem qui limite les logs</a>
      </li>
    
      <li class="post">
        <a href="/telecharger-fichier-de-basecamp.html">Récupération de ses fichiers sur basecamp</a>
      </li>
    
      <li class="post">
        <a href="/translate-on-mongoid.html">Localize avec mongoid</a>
      </li>
    
      <li class="post">
        <a href="/mailtrap-l-aide-au-staging.html">Mailtrap l&#8217;aide au staging</a>
      </li>
    
      <li class="post">
        <a href="/une-journee-dediee-i-mongodb.html">Une journée dédiée à MongoDB</a>
      </li>
    
      <li class="post">
        <a href="/periodictimer-de-eventmachine-le-cron-simplifie.html">PeriodicTimer de EventMachine, le cron simplifié</a>
      </li>
    
      <li class="post">
        <a href="/oupsnow-0-5-0-est-sortie.html">Oupsnow 0.5.0 est sortie</a>
      </li>
    
      <li class="post">
        <a href="/pourquoi-ruby-et-ruby-on-rails-dans-le-developpement-dapplication-web.html">Pourquoi Ruby et Ruby On Rails dans le développement d&#8217;application web ?</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/shingara">@shingara</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'shingara',
            count: 10,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("shingara", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/shingara" class="twitter-follow-button" data-show-count="true">Follow @shingara</a>
  
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Cyril Mougel -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'shinydevblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
